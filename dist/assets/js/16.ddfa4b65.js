(window.webpackJsonp=window.webpackJsonp||[]).push([[16,49],{409:function(e,t,i){var n=i(4),o=i(15),a=Date.prototype,r=n(a.toString),l=n(a.getTime);"Invalid Date"!=String(new Date(NaN))&&o(a,"toString",(function(){var e=l(this);return e==e?r(this):"Invalid Date"}))},422:function(e,t,i){"use strict";var n=i(2),o=i(1),a=i(117),r=i(79),l=i(28),s=i(18),c=i(154),d=i(59),u=i(82)("splice"),p=o.TypeError,f=Math.max,g=Math.min;n({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,n,o,u,m,h,b=s(this),v=l(b),y=a(e,v),C=arguments.length;if(0===C?i=n=0:1===C?(i=0,n=v-y):(i=C-2,n=g(f(r(t),0),v-y)),v+i-n>9007199254740991)throw p("Maximum allowed length exceeded");for(o=c(b,n),u=0;u<n;u++)(m=y+u)in b&&d(o,u,b[m]);if(o.length=n,i<n){for(u=y;u<v-n;u++)h=u+i,(m=u+n)in b?b[h]=b[m]:delete b[h];for(u=v;u>v-n+i;u--)delete b[u-1]}else if(i>n)for(u=v-n;u>y;u--)h=u+i-1,(m=u+n-1)in b?b[h]=b[m]:delete b[h];for(u=0;u<i;u++)b[u+y]=arguments[u+2];return b.length=v-n+i,o}})},566:function(e,t,i){},578:function(e,t,i){"use strict";i(8);t.a=[{key:"keyWord",type:"FormInput",label:"关键字",searchable:!0},{key:"sciName",type:"FormInput",label:"学名",formOption:{properties:{disabled:!0}},tableOption:{sort:2}},{key:"latinSciName",type:"FormInput",label:"拉丁学名",formOption:{properties:{disabled:!0}}},{key:"originalTreeNumber",type:"FormInput",label:"原古树名木编号",formOption:{}},{key:"investNumber",type:"FormIntNumber",label:"调查顺序号",formOption:{}},{key:"ownership",type:"FormSelect",options:[{value:1,label:"11"},{value:2,label:"22"}],label:"权属",tableOption:{sort:3},formOption:{valueLink:{"@*any*@":[{linkKey:"ownership2",linkValue:function(e){return console.log("-------data-------",e),e+1},linkDisable:!1}]}}},{key:"ownership1",type:"FormSelect",label:"权属1",options:[{value:1,label:"11"},{value:2,label:"22"},{value:3,label:"33"},{value:4,label:"44"}],formOption:{properties:{value:"2*(${ownership}||0)"}},tableOption:{sort:3}},{key:"ownership2",type:"FormDynamicSelect",label:"权属2",formSection:"權益信息",options:{key:"id",value:"value",label:"label",apiPromise:function(){return Promise.resolve([{value:1,label:"11",id:1},{value:2,label:"22",id:2}])}},tableOption:{sort:3},formable:!0}]},610:function(e,t,i){"use strict";i(566)},612:function(e,t,i){},615:function(e,t,i){"use strict";i.r(t);var n={name:"apiSchemLoader",components:{},data:function(){return{editorOptions:{selectOnLineNumbers:!1,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,glyphMargin:!0},language:"javascript",data:{title:"",code:""},dialogVisible:!1}},watch:{},methods:{confirm:function(){this.data.code=this.$refs.moEditor.editor.getValue(),this.$emit("loaded",this.data)},openDialog:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1}}},o=(i(610),i(33)),a=Object(o.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"  relative  page-container"},[i("el-button",{attrs:{icon:"el-icon-sort",type:"primary",circle:""},on:{click:e.openDialog}}),e._v(" "),i("el-dialog",{staticClass:"hz-low-code",attrs:{visible:e.dialogVisible,"append-to-body":!0,title:"导入接口Json"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.data.title,callback:function(t){e.$set(e.data,"title",t)},expression:"data.title"}}),e._v(" "),i("MonacoEditor",{ref:"moEditor",staticClass:"editor-content mt12",attrs:{code:this.data.code,language:e.language,changeThrottle:1e3,editorOptions:e.editorOptions}}),e._v(" "),i("el-button",{staticClass:"mt12",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("导入")])],1)],1)}),[],!1,null,"6e74639c",null);t.default=a.exports},694:function(e,t,i){"use strict";i(612)},740:function(e,t,i){"use strict";i.r(t);i(111),i(37),i(409),i(8),i(237),i(236),i(422),i(27),i(234),i(153),i(80);var n=i(615),o=i(578),a={searchForm:{},treeOption:{},tableOption:{lineActions:{update:{},detail:{}}},topToolBar:{}};function r(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t}),"\t")}var l={name:"pageBuilder",components:{apiSchemLoader:n.default},data:function(){return{fieldsContent:r(o.a),pageConfig:r(a),current:"1",editorOptions:{selectOnLineNumbers:!1,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,glyphMargin:!0},language:"javascript"}},mounted:function(){var e=this;new ResizeObserver((function(t){var i,n;e.$refs.fieldsEditor&&(null===(i=e.$refs.fieldsEditor.editor)||void 0===i||i.layout()),e.$refs.pageEditor&&(null===(n=e.$refs.pageEditor.editor)||void 0===n||n.layout())})).observe(document.querySelector("#left-section"))},methods:{editorMounted:function(e,t){this.$refs.fieldsEditor.monaco.languages.registerCompletionItemProvider(this.language,{triggerCharacters:["ds.","."],provideCompletionItems:function(e,t){var i=t.lineNumber,n=t.column,o=e.getValueInRange({startLineNumber:i,startColumn:0,endLineNumber:i,endColumn:n});return console.log("---textBeforePointer---",o),o=o.split(" ").splice(-1).join(""),["dyna"].includes(o)?{suggestions:[{label:'connection("")',detail:"说明",insertText:'connection("")',kind:6},{label:'query("","")',detail:"说明1",insertText:'query("","")',kind:7}]}:['ds.connection("").'].includes(o)?{suggestions:[{label:'query("")',insertText:'query("")'}]}:void 0}})},onfieldsContentChange:function(e){var t=e.getValue();this.$refs.previewIframe.contentWindow.postMessage({origin:"jsEditor",type:"fields",content:t},"*")},onpageConfigChange:function(e){var t=e.getValue();this.$refs.previewIframe.contentWindow.postMessage({origin:"jsEditor",type:"page",content:t},"*")},transApiSchem:function(e){try{if(e.code){var t=JSON.parse(e.code),i=[{key:"keyword",label:"关键字",searchable:!0},{key:"index",type:"index",label:"序号",tableable:!0}];for(var n in t){var o={key:n,label:"label"+n.slice(0,8),type:"FormInput",formOption:{},tableOption:{}};i.push(o)}this.fieldsContent=JSON.stringify(i,null,"\t"),this.$refs.fieldsEditor&&this.$refs.fieldsEditor.editor.setValue(this.fieldsContent)}if(e.title){var a=JSON.parse(this.pageConfig);a.title=e.title,this.pageConfig=JSON.stringify(a)}this.$refs.schemLoader.close()}catch(e){this.$alert("解析数据失败:"+e)}}}},s=(i(694),i(33)),c=Object(s.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"hz-low-code relative  page-container"},[i("div",{staticClass:"flex  full-height"},[i("section",{ref:"leftSection",staticClass:"relative width30 full-height border-r over-scroll",attrs:{id:"left-section"}},[i("el-tabs",{staticClass:"flex flex-direction full-height",attrs:{type:"card "},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},[i("el-tab-pane",{key:"1",staticClass:"full-height",attrs:{label:"字段配置",name:"1"}},[i("MonacoEditor",{directives:[{name:"show",rawName:"v-show",value:"1"==e.current,expression:"current=='1'"}],ref:"fieldsEditor",staticClass:"editor-content ",attrs:{code:e.fieldsContent,language:e.language,changeThrottle:500,editorOptions:e.editorOptions},on:{mounted:e.editorMounted,codeChange:e.onfieldsContentChange}})],1),e._v(" "),i("el-tab-pane",{key:"2",attrs:{label:"页面管理",name:"2"}},["2"==e.current?i("MonacoEditor",{ref:"pageEditor",staticClass:"editor-content ",attrs:{code:e.pageConfig,language:e.language,changeThrottle:500,editorOptions:e.editorOptions},on:{codeChange:e.onpageConfigChange}}):e._e()],1)],1),e._v(" "),i("apiSchemLoader",{ref:"schemLoader",staticClass:"absolute top48 left16",on:{loaded:e.transApiSchem}})],1),e._v(" "),i("div",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"resize"}),e._v(" "),i("iframe",{ref:"previewIframe",staticClass:"full-height flex1 frame-container",attrs:{src:"/pageBuilder/preview",frameborder:"0"}})])])}),[],!1,null,"4bc954ec",null);t.default=c.exports}}]);