(window.webpackJsonp=window.webpackJsonp||[]).push([[9,17],{396:function(e,t,i){"use strict";var n=i(100).PROPER,o=i(15),a=i(12),r=i(16),l=i(3),s=i(538),c=RegExp.prototype.toString,u=l((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=n&&"toString"!=c.name;(u||d)&&o(RegExp.prototype,"toString",(function(){var e=a(this);return"/"+r(e.source)+"/"+r(s(e))}),{unsafe:!0})},400:function(e,t,i){var n=i(4),o=i(15),a=Date.prototype,r=n(a.toString),l=n(a.getTime);"Invalid Date"!=String(new Date(NaN))&&o(a,"toString",(function(){var e=l(this);return e==e?r(this):"Invalid Date"}))},536:function(e,t,i){},538:function(e,t,i){var n=i(7),o=i(11),a=i(34),r=i(226),l=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in l||o(e,"flags")||!a(l,e)?t:n(r,e)}},548:function(e,t,i){"use strict";var n=i(2),o=i(0),a=i(103),r=i(73),l=i(29),s=i(18),c=i(138),u=i(50),d=i(75)("splice"),p=o.TypeError,f=Math.max,g=Math.min;n({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var i,n,o,d,m,h,b=s(this),v=l(b),y=a(e,v),C=arguments.length;if(0===C?i=n=0:1===C?(i=0,n=v-y):(i=C-2,n=g(f(r(t),0),v-y)),v+i-n>9007199254740991)throw p("Maximum allowed length exceeded");for(o=c(b,n),d=0;d<n;d++)(m=y+d)in b&&u(o,d,b[m]);if(o.length=n,i<n){for(d=y;d<v-n;d++)h=d+i,(m=d+n)in b?b[h]=b[m]:delete b[h];for(d=v;d>v-n+i;d--)delete b[d-1]}else if(i>n)for(d=v-n;d>y;d--)h=d+i-1,(m=d+n-1)in b?b[h]=b[m]:delete b[h];for(d=0;d<i;d++)b[d+y]=arguments[d+2];return b.length=v-n+i,o}})},549:function(e,t,i){"use strict";i(9);t.a=[{key:"keyWord",type:"FormInput",label:"关键字",searchable:!0},{key:"sciName",type:"FormInput",label:"学名",formOption:{properties:{disabled:!0}},tableOption:{sort:2}},{key:"latinSciName",type:"FormInput",label:"拉丁学名",formOption:{properties:{disabled:!0}}},{key:"originalTreeNumber",type:"FormInput",label:"原实体编号",formOption:{}},{key:"investNumber",type:"FormIntNumber",label:"调查顺序号",formOption:{}},{key:"ownership",type:"FormSelect",options:[{value:1,label:"11"},{value:2,label:"22"}],label:"属性",tableOption:{sort:3},formOption:{valueLink:{"@*any*@":[{linkKey:"ownership2",linkValue:function(e){return console.log("-------data-------",e),e+1},linkDisable:!1}]}}},{key:"ownership1",type:"FormSelect",label:"属性1",options:[{value:1,label:"11"},{value:2,label:"22"},{value:3,label:"33"},{value:4,label:"44"}],formOption:{properties:{value:"2*(${ownership}||0)"}},tableOption:{sort:3}},{key:"ownership2",type:"FormDynamicSelect",label:"属性2",formSection:"權益信息",options:{key:"id",value:"value",label:"label",apiPromise:function(){return Promise.resolve([{value:1,label:"11",id:1},{value:2,label:"22",id:2}])}},tableOption:{sort:3},formable:!0}]},550:function(e,t,i){"use strict";i(536)},554:function(e,t,i){},556:function(e,t,i){"use strict";i.r(t);var n={name:"apiSchemLoader",components:{},data:function(){return{editorOptions:{selectOnLineNumbers:!1,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,glyphMargin:!0},language:"javascript",data:{title:"",code:""},dialogVisible:!1}},watch:{},methods:{confirm:function(){this.data.code=this.$refs.moEditor.editor.getValue(),this.$emit("loaded",this.data)},openDialog:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1}}},o=(i(550),i(26)),a=Object(o.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"  relative  page-container"},[i("el-button",{attrs:{icon:"el-icon-sort",type:"primary",circle:""},on:{click:e.openDialog}}),e._v(" "),i("el-dialog",{staticClass:"hz-low-code",attrs:{visible:e.dialogVisible,"append-to-body":!0,title:"导入接口Json"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.data.title,callback:function(t){e.$set(e.data,"title",t)},expression:"data.title"}}),e._v(" "),i("MonacoEditor",{ref:"moEditor",staticClass:"editor-content mt12",attrs:{code:this.data.code,language:e.language,changeThrottle:1e3,editorOptions:e.editorOptions}}),e._v(" "),i("el-button",{staticClass:"mt12",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("导入")])],1)],1)}),[],!1,null,"6e74639c",null);t.default=a.exports},583:function(e,t,i){"use strict";i(554)},636:function(e,t,i){"use strict";i.r(t);i(134),i(33),i(400),i(9),i(396),i(216),i(548),i(31),i(222),i(227),i(74);var n=i(556),o=i(549),a={searchOption:{},treeOption:{},listOption:{lineActions:{update:{},detail:{}}},topToolBar:{}};function r(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t}),"\t")}var l={name:"pageBuilder",components:{apiSchemLoader:n.default},data:function(){return{fieldsContent:r(o.a),pageConfig:r(a),current:"1",editorOptions:{selectOnLineNumbers:!1,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,glyphMargin:!0},language:"javascript"}},mounted:function(){var e=this;new ResizeObserver((function(t){var i,n;e.$refs.fieldsEditor&&(null===(i=e.$refs.fieldsEditor.editor)||void 0===i||i.layout()),e.$refs.pageEditor&&(null===(n=e.$refs.pageEditor.editor)||void 0===n||n.layout())})).observe(document.querySelector("#left-section"))},methods:{editorMounted:function(e,t){this.$refs.fieldsEditor.monaco.languages.registerCompletionItemProvider(this.language,{triggerCharacters:["ds.","."],provideCompletionItems:function(e,t){var i=t.lineNumber,n=t.column,o=e.getValueInRange({startLineNumber:i,startColumn:0,endLineNumber:i,endColumn:n});return console.log("---textBeforePointer---",o),o=o.split(" ").splice(-1).join(""),["dyna"].includes(o)?{suggestions:[{label:'connection("")',detail:"说明",insertText:'connection("")',kind:6},{label:'query("","")',detail:"说明1",insertText:'query("","")',kind:7}]}:['ds.connection("").'].includes(o)?{suggestions:[{label:'query("")',insertText:'query("")'}]}:void 0}})},onfieldsContentChange:function(e){var t=e.getValue();this.$refs.previewIframe.contentWindow.postMessage({origin:"jsEditor",type:"fields",content:t},"*")},onpageConfigChange:function(e){var t=e.getValue();this.$refs.previewIframe.contentWindow.postMessage({origin:"jsEditor",type:"page",content:t},"*")},transApiSchem:function(e){try{if(e.code){var t=JSON.parse(e.code),i=[{key:"keyword",label:"关键字",searchable:!0},{key:"index",type:"index",label:"序号",tableable:!0}];for(var n in t){var o={key:n,label:"label"+n.slice(0,8),type:"FormInput",formOption:{},tableOption:{}};i.push(o)}this.fieldsContent=JSON.stringify(i,null,"\t"),this.$refs.fieldsEditor&&this.$refs.fieldsEditor.editor.setValue(this.fieldsContent)}if(e.title){var a=JSON.parse(this.pageConfig);a.title=e.title,this.pageConfig=JSON.stringify(a)}this.$refs.schemLoader.close()}catch(e){this.$alert("解析数据失败:"+e)}}}},s=(i(583),i(26)),c=Object(s.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"hz-low-code relative  page-container"},[i("div",{staticClass:"flex  full-height"},[i("section",{ref:"leftSection",staticClass:"relative width30 full-height border-r over-scroll",attrs:{id:"left-section"}},[i("el-tabs",{staticClass:"flex flex-direction full-height",attrs:{type:"card "},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},[i("el-tab-pane",{key:"1",staticClass:"full-height",attrs:{label:"字段配置",name:"1"}},[i("MonacoEditor",{directives:[{name:"show",rawName:"v-show",value:"1"==e.current,expression:"current=='1'"}],ref:"fieldsEditor",staticClass:"editor-content ",attrs:{code:e.fieldsContent,language:e.language,changeThrottle:500,editorOptions:e.editorOptions},on:{mounted:e.editorMounted,codeChange:e.onfieldsContentChange}})],1),e._v(" "),i("el-tab-pane",{key:"2",attrs:{label:"页面管理",name:"2"}},["2"==e.current?i("MonacoEditor",{ref:"pageEditor",staticClass:"editor-content ",attrs:{code:e.pageConfig,language:e.language,changeThrottle:500,editorOptions:e.editorOptions},on:{codeChange:e.onpageConfigChange}}):e._e()],1)],1),e._v(" "),i("apiSchemLoader",{ref:"schemLoader",staticClass:"absolute top48 left16",on:{loaded:e.transApiSchem}})],1),e._v(" "),i("div",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"resize"}),e._v(" "),i("iframe",{ref:"previewIframe",staticClass:"full-height flex1 frame-container",attrs:{src:e.$site.base+"pageBuilder/preview.html",frameborder:"0"}})])])}),[],!1,null,"22db0f17",null);t.default=c.exports}}]);