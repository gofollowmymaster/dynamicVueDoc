(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{418:function(e,t,i){var s=i(2),a=i(249).values;s({target:"Object",stat:!0},{values:function(e){return a(e)}})},610:function(e,t,i){},679:function(e,t,i){"use strict";i(610)},809:function(e,t,i){"use strict";i.r(t);var s=i(48),a=i(5),n=(i(418),i(82),i(11),i(83),i(17)),o=i(161),l={name:"tableSelector",props:{title:String,visible:{type:Object,default:function(){return{value:!1}}},fields:{type:Array,required:!1,default:function(){return[]}},optionsProps:{type:Object,require:!0},selected:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1}},data:function(){return console.log("--optionsProps--",this.optionsProps),{isEmpty:n.n,searchParams:{refreshKey:""},pagination:{pageNo:1,pageSize:o.b.pageSize},total:1,selectItems:{}}},watch:{selected:{handler:function(e){this.selectItems=e},deep:!0,immediate:!0}},computed:{options:function(){var e=Object(n.e)(this.fields),t=Object(n.f)(this.fields);return Object(n.h)({searchForm:Object(a.a)(Object(a.a)({},o.c),{},{showTestTool:!1}),pagination:o.b,searchFields:e,tableFields:t,tableOption:o.d},this.optionsProps,!0)},queryParams:function(){return Object(a.a)(Object(a.a)({},this.searchParams),this.pagination)},loadListApiPromise:function(){var e=this;return this.options.tableOption.loadListApi(this.queryParams).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=t.data||t,e.total=t.totalCount,e.tableData=t.list,t.list}))}},created:function(){this.pagination.pageSize=this.options.pagination.pageSize||this.pagination.pageSize},methods:{confirm:function(){var e,t=this;(null===(e=Object.values(this.selectItems))||void 0===e?void 0:e.length)<1?this.$alert("您还没有选择任何要素","",{confirmButtonText:"确定",showCancelButton:!0,callback:function(e){"confirm"===e&&(t.visible.value=!1)}}):(this.visible.value=!1,this.$emit("change",this.selectItems))},clear:function(){this.selectItems={},this.$emit("change",{})},handleSizeChange:function(e){this.refresh()},handleCurrentChange:function(e){this.pagination.pageNo=e,this.onSearch({pageNo:e})},onSearch:function(e){this.searchParams=Object(a.a)(Object(a.a)({},this.searchParams),e)},refresh:function(){var e=this.searchParams.refreshKey++;this.onSearch({refreshKey:e})},select:function(e,t){var i,a=this.options.tableOption.properties["row-key"];if(this.multiple)return null!==(i=this.selectItems[t[a]])&&void 0!==i&&i[a]?void delete this.selectItems[t[a]]:void(this.selectItems[t[a]]=t);this.selectItems=Object(s.a)({},t[a],t)},selectChange:function(e){},selectAll:function(e){var t=this,i=this.options.tableOption.properties["row-key"];if(!this.multiple){var s=this.selectItems;return this.selectItems={},void this.$nextTick((function(){t.selectItems=s}))}e.length?e.forEach((function(e){t.selectItems[e[i]]=e})):this.tableData.forEach((function(e){delete t.selectItems[e[i]]}))}}},c=(i(679),i(36)),r=Object(c.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._b({staticClass:"hz-low-code",attrs:{title:e.title,visible:e.visible.value,"show-close":!0,"close-on-click-modal":!0,"close-on-click-escape":!1,"append-to-body":!0,"modal-append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(t){return e.$set(e.visible,"value",t)}}},"el-dialog",e.$attrs,!1),[e.options.searchFields&&e.options.searchFields.length?i("DynamicSearchForm",{attrs:{fields:e.options.searchFields,options:e.options.searchForm},on:{search:e.onSearch}}):e._e(),e._v(" "),i("section",{staticClass:"flex flex-direction "},[i("DynamicTable",{staticClass:"table-wraper flex1",attrs:{table:e.options.tableOption,columns:e.options.tableFields,apiPromise:e.loadListApiPromise,selected:e.selectItems},on:{"select-all":e.selectAll,"selection-change":e.selectChange,select:e.select}}),e._v(" "),i("el-pagination",e._b({staticClass:"mt16",attrs:{background:"",total:e.total,pageSize:e.pagination.pageSize},on:{"size-change":e.handleSizeChange,"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)},"current-change":e.handleCurrentChange}},"el-pagination",e.options.pagination,!1))],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.clear}},[e._v("清 除")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)}),[],!1,null,"04a436ef",null);t.default=r.exports}}]);