(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{407:function(e,t,i){"use strict";var n=i(58),a=i(35),l=i(150),r=i(14),s=(i(232),i(109),i(8),i(110),i(235),i(233),i(27),i(234),i(57),i(44));t.a={props:{item:{type:Object,default:function(){return{}}},value:[String,Number,Array,Boolean],allDisabled:{type:Boolean,default:!1},randomId:{type:String,default:""}},inject:["changeData","statusChangeFn","formItemType","childChangeData","transExpression"],computed:{bindOptions:function(){var e=Object.assign({},this.item);return delete(e=Object(r.a)(Object(r.a)({},e),e.properties)).wraperProperties,delete e.key,delete e.type,delete e.label,delete e.readonly,delete e.rules,delete e.placeholder,delete e.prepend,delete e.append,delete e.defaultValue,delete e.extra,delete e.extra,delete e.properties,delete e.options,e},getDisabled:function(){if(this.allDisabled)return!0;this.item.properties.disabled;return this.item.properties.disabled},val:{get:function(){return this.value},set:function(e){this.$emit("input",e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent(Object(l.a)({},this.item.key,e)):this.childChangeData.valueUpdateEvent()}},getTextModel:function(){return!!this.item.isText||!!this.changeData.textModel}},mounted:function(){},methods:{getPlaceholder:function(e){return e.disable?"":e.placeholder?e.placeholder:"请输入".concat(e.label)},getSelectPlaceholder:function(e){return e.disable?"":void 0!==e.placeholder&&null!==e.placeholder?e.placeholder:"请选择".concat(e.label)},onFocus:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onFocus&&this.item.events.onFocus({event:e,option:this.item,value:this.value})},onBlur:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onBlur&&this.item.events.onBlur({event:e,option:this.item,value:this.value})},_valueLink:function(e){"childForm"===this.formItemType?this._valueLinkByChildForm(e):this._valueLinkByForm(e)},_valueLinkByForm:function(e){var t=this;"object"===Object(a.a)(this.item.valueLink)&&Object.entries(this.item.valueLink).forEach((function(i){var a=Object(n.a)(i,2),l=a[0],r=a[1];"@*any*@"!==l?e===l&&t._valueLinkHandle(r,e):t._valueLinkHandle(r,e)}))},_valueLinkHandle:function(e,t){var i=this;e.length>0&&Object.entries(e).forEach((function(e){var a=Object(n.a)(e,2),r=(a[0],a[1]),c=r.linkKey,o=r.linkValue,u=r.linkDisable,d=r.linkHidden,h=r.linkRequired;Object(s.k)(o)&&("function"==typeof o&&(o=o(t)),i.statusChangeFn.updateFormData(Object(l.a)({},c,o))),Object(s.k)(u)&&i.statusChangeFn.setElementDisable(c,u),Object(s.k)(d)&&i.statusChangeFn.setElementHidden(c,d),Object(s.k)(h)&&i.statusChangeFn.setElementRequired(c,h)}))},_valueLinkByChildForm:function(e){},throwPointRightZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var i=t.split("."),n=i[1];return 0===(n=n.replace(/[0]+$/g,"")).length?i[0]:i[0]+"."+n}return t},throwPointLeftZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var i=t.split("."),n=i[0];return 0===(n=n.replace(/^[0]+/g,"")).length?"0."+i[1]:n+"."+i[1]}return""===(t=t.replace(/^[0]+/g,""))&&""!==e&&(t="0"),t}}}},601:function(e,t,i){},663:function(e,t,i){var n=i(2),a=i(664),l=i(151);n({target:"Array",proto:!0},{fill:a}),l("fill")},664:function(e,t,i){"use strict";var n=i(18),a=i(117),l=i(28);e.exports=function(e){for(var t=n(this),i=l(t),r=arguments.length,s=a(r>1?arguments[1]:void 0,i),c=r>2?arguments[2]:void 0,o=void 0===c?i:a(c,i);o>s;)t[s++]=e;return t}},665:function(e,t,i){"use strict";i(601)},771:function(e,t,i){"use strict";i.r(t);var n=i(40),a=i(150),l=(i(109),i(8),i(110),i(663),i(236),{name:"FormMulLinkage",mixins:[i(407).a],data:function(){return{hasLoaded:!0}},watch:{item:{handler:function(){this.hasLoaded=!1},immediate:!1},val:{handler:function(){this.hasLoaded=!1},immediate:!1},"item.linkLevel":{handler:function(){this.initVal()},immediate:!0}},created:function(){this.loadDict(this.item.firstParentKey)},computed:{val:{get:function(){return this.value},set:function(e){this.$emit("input",e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent(Object(a.a)({},this.item.key,e)):this.childChangeData.valueUpdateEvent()}}},methods:{getTextModelValueList:function(){var e=this,t=[];this.dynamicDict[this.item.firstParentKey]&&0!==this.dynamicDict[this.item.firstParentKey].length||t.push(this.item.firstParentKey),this.val&&this.val instanceof Array&&this.val.forEach((function(i){i&&(e.dynamicDict[i]&&0!==e.dynamicDict[i].length||t.push(i))})),this.hasLoaded=!0,this.loadDict(t)},textModelValue:function(){for(var e=this,t=new Array(this.item.linkLevel).fill(""),i=!1,n=function(n){var a=e.val[n],l="";if(l=0===n?e.item.firstParentKey:e.val[n-1],e.dynamicDict[l]&&e.dynamicDict[l].length>0){var r="",s=!1;return e.dynamicDict[l].forEach((function(t){t[e.dynamicSelectOption.value]===a&&(s=!0,r=t[e.dynamicSelectOption.label])})),s||(r=a),t[n]=r,"continue"}t[n]=a,i=!0},a=0;a<this.item.linkLevel;a++)n(a);return i&&!this.hasLoaded&&this.getTextModelValueList(),t.join("")||"-"},initVal:function(){this.$emit("input",new Array(this.item.linkLevel||3).fill(""))},getOptions:function(e){return"1"===String(e)?this.dynamicDict[this.item.firstParentKey]||[]:this.dynamicDict[this.val[e-2]]||[]},loadDict:function(e){var t=this,i=null;i=this.dynamicSelectOption.queryKey?e instanceof Array?Object(a.a)({},this.dynamicSelectOption.queryKey,Object(n.a)(e)):Object(a.a)({},this.dynamicSelectOption.queryKey,[e]):e instanceof Array?Object(n.a)(e):[e],this.$set(this.dynamicDict,e,[]),this.getSpecialAxios().post(this.dynamicSelectOption.dictUrl,i).then((function(i){var a;200===(a=i.request&&i.headers?i.data:i).code?a.data.length>0&&((e instanceof Array?Object(n.a)(e):[e]).forEach((function(e){(!t.dynamicDict[e]||t.dynamicDict[e].length>0)&&t.$set(t.dynamicDict,e,[])})),a.data.forEach((function(e){var i=e[t.dynamicSelectOption.parentKey];t.dynamicDict[i].push(e)})),t.$forceUpdate()):t.$message.error(a.msg)})).catch((function(e){console.log(e),t.$message.error("数据字典加载错误，请刷新页面重试")}))},onChange:function(e,t){for(var i=t;i<this.item.linkLevel;i++)this.val[i]="";t!==this.item.linkLevel&&(this.dynamicDict[e]&&this.dynamicDict[e].length>0||this.loadDict(e))}}}),r=(i(665),i(33)),s=Object(r.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"form-unqiue-"+e.item.key+" "+(e.getTextModel?"":"hz-untext-box"),style:e.item.style||{}},[e.getTextModel?i("div",{staticClass:"form-input-text",style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue()))]):i("el-row",e._l(e.item.linkLevel||3,(function(t){return i("el-col",{key:t,attrs:{span:24/(e.item.linkLevel||3)}},[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.getDisabled,placeholder:e.getSelectPlaceholder(e.item)},on:{change:function(i){return e.onChange(i,t)}},model:{value:e.val[t-1],callback:function(i){e.$set(e.val,t-1,i)},expression:"val[i-1]"}},e._l(e.getOptions(t),(function(t){return i("el-option",{key:t[e.dynamicSelectOption.value],attrs:{label:t[e.dynamicSelectOption.label],value:t[e.dynamicSelectOption.value]}})})),1)],1)})),1)],1)}),[],!1,null,"1fd68d6b",null);t.default=s.exports}}]);