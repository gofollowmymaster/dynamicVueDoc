(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{420:function(t,e,n){var a=n(3),i=n(40),o=n(16),r=/"/g,c=a("".replace);t.exports=function(t,e,n,a){var l=o(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+c(o(a),r,"&quot;")+'"'),s+">"+l+"</"+e+">"}},421:function(t,e,n){var a=n(4);t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},423:function(t,e,n){"use strict";var a=n(2),i=n(420);a({target:"String",proto:!0,forced:n(421)("link")},{link:function(t){return i(this,"a","href",t)}})},571:function(t,e,n){"use strict";n(423),n(29),n(59),n(119);var a=n(5),i=n(50),o=n(51),r=n(17);function c(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)return t.visible?t.visible instanceof Object?void(t.visible.value=!1):void(t.visible=!1):void("function"!=typeof t.close?c(t.$parent,e):t.close())}var l={reset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=t.$refs.DynamicFormContent||t.$parent.$refs.DynamicFormContent;n?n.resetFields():console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,")}},refresh:function(t,e){"function"!=typeof e?!0===e&&("function"==typeof t.refresh?t.refresh():t.$dynamicBus.$emit("dynamicRefresh")):e()},emitEvent:function(t,e,n){"string"==typeof e&&t.$emit(e,n)},closeModal:c,close:c,showTip:function(t,e,n){!0===e&&t.$message&&t.$message({type:"success",message:n.msg||n.message||"操作成功"})}},s={dialogForm:function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"handle",value:function(t,e,n){this.vm=n;var i=t.dialog;"el-drawer"==i.container&&(i.properties=Object(a.a)({size:i.properties.width,direction:"rtl"},i.properties)),this.dialogFormHandle(t,e)}},{key:"dialogFormHandle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t||{}};if(t.apiPromise)t.apiPromise(n).then(i).then((function(n){e.setCurrentDialogForm(t,n,a)}));else{var o=i(n);this.setCurrentDialogForm(t,o,a)}}},{key:"setCurrentDialogForm",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object(a.a)(Object(a.a)({container:"el-dialog"},Object(r.g)(t.dialog)),n);i.body.data=e,"function"!=typeof this.vm.setGlobalDialogForm?this.vm.$globalDialogForm(i,this.vm.actionBarWraper):this.vm.setGlobalDialogForm(i)}}]),t}(),dialogPage:function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"handle",value:function(t,e,n){this.vm=n;var i=t.dialog;"el-drawer"==i.container&&(i.properties=Object(a.a)({size:i.properties.width,direction:"rtl"},i.properties)),this.dialogPageHandle(t,e)}},{key:"dialogPageHandle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t||{}};if(t.apiPromise)t.apiPromise(n).then(i).then((function(n){e.setCurrentDialogContent(t,n,a)}));else{var o=i(n);this.setCurrentDialogContent(t,Object(r.a)(o),a)}}},{key:"setCurrentDialogContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object(a.a)(Object(a.a)({container:"el-dialog"},Object(r.g)(t.dialog)),n);i.data=e,"function"!=typeof this.vm.setGlobalDialogPage?this.vm.$globalDialogPage(i,this.vm.actionBarWraper):this.vm.setGlobalDialogPage(i)}}]),t}(),requestApi:function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"handle",value:function(t,e,n){var a=this;this.vm=n;var i="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t};t.apiPromise(e).then(i).then((function(e){return a.actionCallback(t,e),e}))}},{key:"actionCallback",value:function(t,e){if(t.callback instanceof Object)for(var n in t.callback)"function"==typeof t.callback[n]&&t.callback[n](this.vm,e),"function"==typeof l[n]&&l[n](this.vm,t.callback[n],e)}}]),t}(),download:function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"handle",value:function(t,e,n){var a=this;this.vm=n;var i="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t};t.apiPromise(e).then(i).then((function(e){var n,a,i=null!==(n=t.fileName)&&void 0!==n?n:null===(a=e.headers["content-disposition"])||void 0===a?void 0:a.replace(/.*=(.*\.\w+)/g,"$1");Object(r.j)(e.data,decodeURIComponent(i))})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.actionCallback(t,e),e}))}},{key:"actionCallback",value:function(t,e){if(t.callback instanceof Object)for(var n in t.callback)"function"==typeof t.callback[n]&&t.callback[n](this.vm,e),"function"==typeof l[n+"Handle"]&&l[n+"Handle"](this.vm,t.callback[n],e)}}]),t}()};e.a={props:{},computed:{},inject:["setGlobalDialogForm","setGlobalDialogPage"],methods:{actionHandles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.actionType){case"dialogPage":case"dialogForm":case"requestApi":case"download":s[t.actionType].handle(t,e,this);break;case"submit":case"reset":case"close":case"link":case"router":"function"==typeof this[t.actionType+"Handle"]&&this[t.actionType+"Handle"](t,e),l[t.actionType]&&l[t.actionType](this);break;case"routerDialogPage":case"routerDialogForm":this.routerDialogHandle(t,e);break;default:this.customActionHandle(t,e)}},submitHandle:function(t){var e=this,n=this.$refs.DynamicFormContent||this.$parent.$refs.DynamicFormContent;n?n.validate((function(n,a){n&&s.requestApi.handle(t,a,e)})):console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,")},linkHandle:function(t){window.open(t.link,t.window)},routerHandle:function(t,e){var n="function"==typeof t.router?t.router(e):t.router;this.$router[t.routerAction||"push"](n)},routerDialogHandle:function(t,e){var n,a=t.mainKey||"id",i={};"function"==typeof t.router?n=t.router(e):(n=this.$route.fullPath.replace(/[\/|\\]$/,"")+"/",t=t.router&&"string"==typeof t.router?t.router.replace(/[\/|\\]$/,"")+"/":t.actionKey,i={id:null==e?void 0:e[a],action:t}),this.$router[t.routerAction||"push"]({path:n,query:i})},customActionHandle:function(t,e){"function"!=typeof t.actionHandle?console.warn("定义了未被识别的动作"+JSON.stringify(t)):t.actionHandle(e)}}}},809:function(t,e,n){"use strict";n.r(e);n(11);var a={name:"DynamicForm",mixins:[n(571).a],data:function(){return{formData:{}}},props:{formOption:{type:Object,default:function(){return{}}},formItemList:{type:Array,default:function(){return[]}},actions:{type:Object,default:function(){return{}}},apiPromise:{type:Function,default:function(){return Promise.resolve()}},data:{type:Object,default:function(){return{}}}},computed:{},watch:{apiPromise:{handler:function(t){var e=this;t instanceof Function&&t(this.data).then((function(t){t instanceof Object&&(e.formData=t)}))},deep:!0,immediate:!0},data:{handler:function(t){t instanceof Object&&(this.formData=t)},immediate:!0}},mounted:function(){},components:{},methods:{reset:function(){this.$refs.DynamicFormContent.resetFields()},actionHandle:function(t){this.actionHandles(t)},formDataUpdated:function(t,e){}}},i=n(36),o=Object(i.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("main",{staticClass:"dynamic-form-wraper "},[e("DynamicFormContent",this._b({ref:"DynamicFormContent",attrs:{data:this.formData,formItemList:this.formItemList},on:{formDataUpdated:this.formDataUpdated}},"DynamicFormContent",this.formOption,!1)),this._v(" "),e("DynamicActions",{attrs:{actions:this.actions,actionData:{}}})],1)}),[],!1,null,"e185a27c",null);e.default=o.exports}}]);