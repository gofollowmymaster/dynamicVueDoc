(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{413:function(e,t,i){"use strict";var s=i(49),l=i(39),n=i(48),a=i(5),r=(i(238),i(82),i(11),i(83),i(241),i(239),i(29),i(240),i(59),i(17));t.a={props:{item:{type:Object,default:function(){return{}}},value:[String,Number,Array,Boolean,Object],allDisabled:{type:Boolean,default:!1},randomId:{type:String,default:""}},inject:["changeData","statusChangeFn","formItemType","childChangeData","transExpression"],computed:{bindOptions:function(){var e=Object.assign({},this.item);return delete(e=Object(a.a)(Object(a.a)({},e),e.properties)).wraperProperties,delete e.key,delete e.type,delete e.label,delete e.readonly,delete e.rules,delete e.placeholder,delete e.prepend,delete e.append,delete e.defaultValue,delete e.extra,delete e.properties,delete e.options,delete e.groupProperties,delete e.valueLink,e.maxlength=e.maxlength||255,e},getDisabled:function(){return!!this.allDisabled||this.item.properties.disabled},val:{get:function(){return this.value},set:function(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent(Object(n.a)({},this.item.key,e)):this.childChangeData.valueUpdateEvent()}},getTextModel:function(){return!!this.item.isText||!!this.changeData.textModel}},created:function(){Object(r.m)(this.item.defaultValue)&&(this.val=Object(r.m)(this.value)?this.value:this.item.defaultValue)},methods:{getPlaceholder:function(e){return e.disable?"":e.placeholder?e.placeholder:"请输入".concat(e.label)},getSelectPlaceholder:function(e){return e.disable?"":void 0!==e.placeholder&&null!==e.placeholder?e.placeholder:"请选择".concat(e.label)},onFocus:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onFocus&&this.item.events.onFocus({event:e,option:this.item,value:this.value})},onBlur:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onBlur&&this.item.events.onBlur({event:e,option:this.item,value:this.value})},_valueLink:function(e){"childForm"===this.formItemType?this._valueLinkByChildForm(e):this._valueLinkByForm(e)},_valueLinkByForm:function(e){var t=this;"object"===Object(l.a)(this.item.valueLink)&&Object.entries(this.item.valueLink).forEach((function(i){var l=Object(s.a)(i,2),n=l[0],a=l[1];"@*any*@"!==n?e===n&&t._valueLinkHandle(a,e):t._valueLinkHandle(a,e)}))},_valueLinkHandle:function(e,t){var i=this;e.length>0&&Object.entries(e).forEach((function(e){var l=Object(s.a)(e,2),a=(l[0],l[1]),o=a.linkKey,d=a.linkValue,u=a.linkDisable,c=a.linkHidden,p=a.linkRequired;Object(r.m)(d)&&("function"==typeof d&&(d=d(t)),i.statusChangeFn.updateFormData(Object(n.a)({},o,d))),Object(r.m)(u)&&i.statusChangeFn.setElementDisable(o,u),Object(r.m)(c)&&i.statusChangeFn.setElementHidden(o,c),Object(r.m)(p)&&i.statusChangeFn.setElementRequired(o,p)}))},_valueLinkByChildForm:function(e){},throwPointRightZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var i=t.split("."),s=i[1];return 0===(s=s.replace(/[0]+$/g,"")).length?i[0]:i[0]+"."+s}return t},throwPointLeftZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var i=t.split("."),s=i[0];return 0===(s=s.replace(/^[0]+/g,"")).length?"0."+i[1]:s+"."+i[1]}return""===(t=t.replace(/^[0]+/g,""))&&""!==e&&(t="0"),t}}}},414:function(e,t,i){var s=i(3),l=i(15),n=Date.prototype,a=s(n.toString),r=s(n.getTime);"Invalid Date"!=String(new Date(NaN))&&l(n,"toString",(function(){var e=r(this);return e==e?a(this):"Invalid Date"}))},586:function(e,t,i){var s={"./af":425,"./af.js":425,"./ar":426,"./ar-dz":427,"./ar-dz.js":427,"./ar-kw":428,"./ar-kw.js":428,"./ar-ly":429,"./ar-ly.js":429,"./ar-ma":430,"./ar-ma.js":430,"./ar-sa":431,"./ar-sa.js":431,"./ar-tn":432,"./ar-tn.js":432,"./ar.js":426,"./az":433,"./az.js":433,"./be":434,"./be.js":434,"./bg":435,"./bg.js":435,"./bm":436,"./bm.js":436,"./bn":437,"./bn-bd":438,"./bn-bd.js":438,"./bn.js":437,"./bo":439,"./bo.js":439,"./br":440,"./br.js":440,"./bs":441,"./bs.js":441,"./ca":442,"./ca.js":442,"./cs":443,"./cs.js":443,"./cv":444,"./cv.js":444,"./cy":445,"./cy.js":445,"./da":446,"./da.js":446,"./de":447,"./de-at":448,"./de-at.js":448,"./de-ch":449,"./de-ch.js":449,"./de.js":447,"./dv":450,"./dv.js":450,"./el":451,"./el.js":451,"./en-au":452,"./en-au.js":452,"./en-ca":453,"./en-ca.js":453,"./en-gb":454,"./en-gb.js":454,"./en-ie":455,"./en-ie.js":455,"./en-il":456,"./en-il.js":456,"./en-in":457,"./en-in.js":457,"./en-nz":458,"./en-nz.js":458,"./en-sg":459,"./en-sg.js":459,"./eo":460,"./eo.js":460,"./es":461,"./es-do":462,"./es-do.js":462,"./es-mx":463,"./es-mx.js":463,"./es-us":464,"./es-us.js":464,"./es.js":461,"./et":465,"./et.js":465,"./eu":466,"./eu.js":466,"./fa":467,"./fa.js":467,"./fi":468,"./fi.js":468,"./fil":469,"./fil.js":469,"./fo":470,"./fo.js":470,"./fr":471,"./fr-ca":472,"./fr-ca.js":472,"./fr-ch":473,"./fr-ch.js":473,"./fr.js":471,"./fy":474,"./fy.js":474,"./ga":475,"./ga.js":475,"./gd":476,"./gd.js":476,"./gl":477,"./gl.js":477,"./gom-deva":478,"./gom-deva.js":478,"./gom-latn":479,"./gom-latn.js":479,"./gu":480,"./gu.js":480,"./he":481,"./he.js":481,"./hi":482,"./hi.js":482,"./hr":483,"./hr.js":483,"./hu":484,"./hu.js":484,"./hy-am":485,"./hy-am.js":485,"./id":486,"./id.js":486,"./is":487,"./is.js":487,"./it":488,"./it-ch":489,"./it-ch.js":489,"./it.js":488,"./ja":490,"./ja.js":490,"./jv":491,"./jv.js":491,"./ka":492,"./ka.js":492,"./kk":493,"./kk.js":493,"./km":494,"./km.js":494,"./kn":495,"./kn.js":495,"./ko":496,"./ko.js":496,"./ku":497,"./ku.js":497,"./ky":498,"./ky.js":498,"./lb":499,"./lb.js":499,"./lo":500,"./lo.js":500,"./lt":501,"./lt.js":501,"./lv":502,"./lv.js":502,"./me":503,"./me.js":503,"./mi":504,"./mi.js":504,"./mk":505,"./mk.js":505,"./ml":506,"./ml.js":506,"./mn":507,"./mn.js":507,"./mr":508,"./mr.js":508,"./ms":509,"./ms-my":510,"./ms-my.js":510,"./ms.js":509,"./mt":511,"./mt.js":511,"./my":512,"./my.js":512,"./nb":513,"./nb.js":513,"./ne":514,"./ne.js":514,"./nl":515,"./nl-be":516,"./nl-be.js":516,"./nl.js":515,"./nn":517,"./nn.js":517,"./oc-lnc":518,"./oc-lnc.js":518,"./pa-in":519,"./pa-in.js":519,"./pl":520,"./pl.js":520,"./pt":521,"./pt-br":522,"./pt-br.js":522,"./pt.js":521,"./ro":523,"./ro.js":523,"./ru":524,"./ru.js":524,"./sd":525,"./sd.js":525,"./se":526,"./se.js":526,"./si":527,"./si.js":527,"./sk":528,"./sk.js":528,"./sl":529,"./sl.js":529,"./sq":530,"./sq.js":530,"./sr":531,"./sr-cyrl":532,"./sr-cyrl.js":532,"./sr.js":531,"./ss":533,"./ss.js":533,"./sv":534,"./sv.js":534,"./sw":535,"./sw.js":535,"./ta":536,"./ta.js":536,"./te":537,"./te.js":537,"./tet":538,"./tet.js":538,"./tg":539,"./tg.js":539,"./th":540,"./th.js":540,"./tk":541,"./tk.js":541,"./tl-ph":542,"./tl-ph.js":542,"./tlh":543,"./tlh.js":543,"./tr":544,"./tr.js":544,"./tzl":545,"./tzl.js":545,"./tzm":546,"./tzm-latn":547,"./tzm-latn.js":547,"./tzm.js":546,"./ug-cn":548,"./ug-cn.js":548,"./uk":549,"./uk.js":549,"./ur":550,"./ur.js":550,"./uz":551,"./uz-latn":552,"./uz-latn.js":552,"./uz.js":551,"./vi":553,"./vi.js":553,"./x-pseudo":554,"./x-pseudo.js":554,"./yo":555,"./yo.js":555,"./zh-cn":556,"./zh-cn.js":556,"./zh-hk":557,"./zh-hk.js":557,"./zh-mo":558,"./zh-mo.js":558,"./zh-tw":559,"./zh-tw.js":559};function l(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=n,e.exports=l,l.id=586},628:function(e,t,i){},698:function(e,t,i){"use strict";i(628)},804:function(e,t,i){"use strict";i.r(t);var s,l=i(48),n=i(5),a=(i(11),i(157),i(122),i(84),i(37),i(29),i(59),i(414),i(413)),r=i(412),o=i.n(r),d=i(17),u=null===(s=window._config)||void 0===s?void 0:s.staticHost,c=[{type:"index",key:"index",label:"序号",tableOption:{width:60}},{key:"fileName",label:"名称",tableOption:{},formOption:{wraperProperties:{class:["grid-col-24"]}}},{key:"fileSize",type:"FormInput",label:"大小",formOption:{wraperProperties:{class:["grid-col-24"]}}},{key:"uploadTime",type:"FormInput",label:"上传时间",tableable:!0,formOption:{wraperProperties:{class:["grid-col-24"]}}}];var p={name:"FormUpload",mixins:[a.a],data:function(){var e=this;return console.log("----this.downloadApi----",this.downloadApi),{dialogImageUrl:"",dialogVisible:!1,fileFields:c,imgPrevUrl:u,apiPromises:{bulkdelete:function(t){var i=[];for(var s in e.fileList)s.fileId!==t.fileId&&i.push(s);return e.handleRemove(t,i),Promise.resolve({})},list:function(){return Promise.resolve({list:e.fileList,totalCount:e.fileList.length})},detail:function(e){return Promise.resolve(e)}},curdOptions:{topToolBar:null,searchFields:null,listOption:{hasCheckbox:!1,lineActions:{update:null,detail:null,download:Object(d.b)("downloadActionOption",{apiPromise:this.item.downloadApi,label:"下载"})}},treeOption:null},fileListInit:[]}},computed:{accept:function(){var e,t,i="",s=(null===(e=this.item.properties)||void 0===e?void 0:e["list-type"])||this.item["list-type"];return["picture","picture-card"].includes(s)&&(i="img"),i||(null===(t=this.item.properties)||void 0===t?void 0:t.accept)||this.item.accept},bindOptions:function(){var e=Object.assign({},this.item);return(e=Object(n.a)(Object(n.a)({},e),e.properties)).name=e.key,e["http-request"]=e.apiPromise,e.multiple=1!=e.limit,e.disabled=!!this.getTextModel||e.disabled,e.accept=function(e){switch(e){case"img":return"image/*";case"video":return"video/*";case"doc":return".doc,.docx,.xml,application/msword,\n            application/pdf,application/vnd.ms-excel,\n            application/vnd.openxmlformats-officedocument.wordprocessingml.document,\n            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,";default:return"*"}}(this.accept),e.drag&&(e["list-type"]="text"),delete e.key,delete e.size,delete e.type,delete e.label,delete e.readonly,delete e.rules,delete e.placeholder,delete e.prepend,delete e.append,delete e.defaultValue,e},val:{get:function(){var e;return(null===(e=this.value)||void 0===e?void 0:e.map((function(e){return e.fileId||e.id})))||[]},set:function(e){this.$emit("input",e),this._valueLink(e),this.statusChangeFn.valueUpdateEvent(Object(l.a)({},this.item.key,e))}},fileList:function(){var e,t=this;return(null===(e=this.value)||void 0===e?void 0:e.filter((function(e){return e.fileId||e.id})).map((function(e){return e.fileUrl=t.imgPrevUrl+e.fileUrl,e.uploadTime=e.createTime||e.upLoadTime,e.fileName=e.fileName||e.sourceName||e.saveName||e.name,e.fileId=e.fileId||e.id,e})))||[]}},mounted:function(){var e,t=this;this.fileListInit=(null===(e=this.value)||void 0===e?void 0:e.filter((function(e){return e.fileId||e.id})).map((function(e){var i=t.imgPrevUrl+e.fileUrl.replace(/\\\\/g,"/");return console.log("----replace---",i),{url:i,fileId:e.fileId||e.id,name:e.fileName||e.sourceName||e.saveName||e.name,fileSize:e.fileSize,fileType:e.fileType,uploadTime:e.createTime||e.upLoadTime}})))||[]},methods:{handleRemove:function(e,t){this.val=this.value.filter((function(t){return t.uid!=e.uid&&t.fileId!==e.fileId}))},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess:function(e,t,i){if(e&&t.response){var s,l,n,a,r,d;s=t.response.fileId,l=t.response.fileUrl||t.url,n=t.raw.name,a=t.raw.size,r=o()(new Date).format("YYYY-MM-DD HH:mm:SS"),d=t.uid;var u=this.value||[];u.push({fileId:s,fileUrl:l,fileName:n,fileSize:a,uploadTime:r,uid:d}),this.val=u}},handleError:function(e){console.error(e)},handleBeforeUpload:function(){}}},m=(i(698),i(36)),f=Object(m.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"form-unqiue-"+e.item.key+" "+(e.getTextModel?"":"hz-img-box")+" "+("table"===e.bindOptions["list-type"]&&"upload-table-list"),style:e.item.style||{}},[e.getTextModel?e._e():i("el-upload",e._b({attrs:{action:"","file-list":e.fileListInit,"before-upload":e.handleBeforeUpload,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,disabled:e.getDisabled}},"el-upload",e.bindOptions,!1),[e.bindOptions.drag?i("div",[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.item.tip))])]):i("div",["picture-card"==e.bindOptions["list-type"]?i("i",{staticClass:"el-icon-plus"}):i("el-button",{attrs:{size:"small"}},[e._v(e._s(e.item.btn_text||"上传"))])],1),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.item.tip))])]),e._v(" "),e.getTextModel&&e.fileList.length&&"img"==e.accept?i("section",e._l(e.fileList,(function(t){return i("el-image",{key:t.fileUrl,staticClass:"mr12",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.fileUrl,"preview-src-list":e.fileList.map((function(e){return e.fileUrl}))}})})),1):e._e(),e._v(" "),e.getTextModel&&e.fileList.length&&"video"==e.accept?i("section",e._l(e.fileList,(function(e){return i("video",{key:e.fileUrl,staticClass:"mr12",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.fileUrl}})})),0):e._e(),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),"table"==e.bindOptions["list-type"]||e.getTextModel&&"img"!=e.accept&&"video"!=e.accept?i("DynamicCurd",{style:{padding:0},attrs:{fields:e.fileFields,apiPromises:e.apiPromises,optionsProps:e.curdOptions,entityLabel:"附件"}}):e._e()],1)}),[],!1,null,"33410218",null);t.default=f.exports}}]);