(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{413:function(e,t,i){"use strict";var s=i(49),l=i(37),n=i(48),a=i(5),r=(i(239),i(82),i(11),i(83),i(238),i(240),i(29),i(241),i(59),i(17));t.a={props:{item:{type:Object,default:function(){return{}}},value:[String,Number,Array,Boolean],allDisabled:{type:Boolean,default:!1},randomId:{type:String,default:""}},inject:["changeData","statusChangeFn","formItemType","childChangeData","transExpression"],computed:{bindOptions:function(){var e=Object.assign({},this.item);return delete(e=Object(a.a)(Object(a.a)({},e),e.properties)).wraperProperties,delete e.key,delete e.type,delete e.label,delete e.readonly,delete e.rules,delete e.placeholder,delete e.prepend,delete e.append,delete e.defaultValue,delete e.extra,delete e.properties,delete e.options,delete e.groupProperties,e.maxlength=e.maxlength||255,e},getDisabled:function(){return!!this.allDisabled||this.item.properties.disabled},val:{get:function(){return this.value},set:function(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent(Object(n.a)({},this.item.key,e)):this.childChangeData.valueUpdateEvent()}},getTextModel:function(){return!!this.item.isText||!!this.changeData.textModel}},created:function(){Object(r.m)(this.item.defaultValue)&&(this.val=Object(r.m)(this.value)?this.value:this.item.defaultValue)},methods:{getPlaceholder:function(e){return e.disable?"":e.placeholder?e.placeholder:"请输入".concat(e.label)},getSelectPlaceholder:function(e){return e.disable?"":void 0!==e.placeholder&&null!==e.placeholder?e.placeholder:"请选择".concat(e.label)},onFocus:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onFocus&&this.item.events.onFocus({event:e,option:this.item,value:this.value})},onBlur:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onBlur&&this.item.events.onBlur({event:e,option:this.item,value:this.value})},_valueLink:function(e){"childForm"===this.formItemType?this._valueLinkByChildForm(e):this._valueLinkByForm(e)},_valueLinkByForm:function(e){var t=this;"object"===Object(l.a)(this.item.valueLink)&&Object.entries(this.item.valueLink).forEach((function(i){var l=Object(s.a)(i,2),n=l[0],a=l[1];"@*any*@"!==n?e===n&&t._valueLinkHandle(a,e):t._valueLinkHandle(a,e)}))},_valueLinkHandle:function(e,t){var i=this;e.length>0&&Object.entries(e).forEach((function(e){var l=Object(s.a)(e,2),a=(l[0],l[1]),o=a.linkKey,d=a.linkValue,u=a.linkDisable,c=a.linkHidden,p=a.linkRequired;Object(r.m)(d)&&("function"==typeof d&&(d=d(t)),i.statusChangeFn.updateFormData(Object(n.a)({},o,d))),Object(r.m)(u)&&i.statusChangeFn.setElementDisable(o,u),Object(r.m)(c)&&i.statusChangeFn.setElementHidden(o,c),Object(r.m)(p)&&i.statusChangeFn.setElementRequired(o,p)}))},_valueLinkByChildForm:function(e){},throwPointRightZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var i=t.split("."),s=i[1];return 0===(s=s.replace(/[0]+$/g,"")).length?i[0]:i[0]+"."+s}return t},throwPointLeftZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var i=t.split("."),s=i[0];return 0===(s=s.replace(/^[0]+/g,"")).length?"0."+i[1]:s+"."+i[1]}return""===(t=t.replace(/^[0]+/g,""))&&""!==e&&(t="0"),t}}}},416:function(e,t,i){var s=i(3),l=i(15),n=Date.prototype,a=s(n.toString),r=s(n.getTime);"Invalid Date"!=String(new Date(NaN))&&l(n,"toString",(function(){var e=r(this);return e==e?a(this):"Invalid Date"}))},590:function(e,t,i){var s={"./af":435,"./af.js":435,"./ar":436,"./ar-dz":437,"./ar-dz.js":437,"./ar-kw":438,"./ar-kw.js":438,"./ar-ly":439,"./ar-ly.js":439,"./ar-ma":440,"./ar-ma.js":440,"./ar-sa":441,"./ar-sa.js":441,"./ar-tn":442,"./ar-tn.js":442,"./ar.js":436,"./az":443,"./az.js":443,"./be":444,"./be.js":444,"./bg":445,"./bg.js":445,"./bm":446,"./bm.js":446,"./bn":447,"./bn-bd":448,"./bn-bd.js":448,"./bn.js":447,"./bo":449,"./bo.js":449,"./br":450,"./br.js":450,"./bs":451,"./bs.js":451,"./ca":452,"./ca.js":452,"./cs":453,"./cs.js":453,"./cv":454,"./cv.js":454,"./cy":455,"./cy.js":455,"./da":456,"./da.js":456,"./de":457,"./de-at":458,"./de-at.js":458,"./de-ch":459,"./de-ch.js":459,"./de.js":457,"./dv":460,"./dv.js":460,"./el":461,"./el.js":461,"./en-au":462,"./en-au.js":462,"./en-ca":463,"./en-ca.js":463,"./en-gb":464,"./en-gb.js":464,"./en-ie":465,"./en-ie.js":465,"./en-il":466,"./en-il.js":466,"./en-in":467,"./en-in.js":467,"./en-nz":468,"./en-nz.js":468,"./en-sg":469,"./en-sg.js":469,"./eo":470,"./eo.js":470,"./es":471,"./es-do":472,"./es-do.js":472,"./es-mx":473,"./es-mx.js":473,"./es-us":474,"./es-us.js":474,"./es.js":471,"./et":475,"./et.js":475,"./eu":476,"./eu.js":476,"./fa":477,"./fa.js":477,"./fi":478,"./fi.js":478,"./fil":479,"./fil.js":479,"./fo":480,"./fo.js":480,"./fr":481,"./fr-ca":482,"./fr-ca.js":482,"./fr-ch":483,"./fr-ch.js":483,"./fr.js":481,"./fy":484,"./fy.js":484,"./ga":485,"./ga.js":485,"./gd":486,"./gd.js":486,"./gl":487,"./gl.js":487,"./gom-deva":488,"./gom-deva.js":488,"./gom-latn":489,"./gom-latn.js":489,"./gu":490,"./gu.js":490,"./he":491,"./he.js":491,"./hi":492,"./hi.js":492,"./hr":493,"./hr.js":493,"./hu":494,"./hu.js":494,"./hy-am":495,"./hy-am.js":495,"./id":496,"./id.js":496,"./is":497,"./is.js":497,"./it":498,"./it-ch":499,"./it-ch.js":499,"./it.js":498,"./ja":500,"./ja.js":500,"./jv":501,"./jv.js":501,"./ka":502,"./ka.js":502,"./kk":503,"./kk.js":503,"./km":504,"./km.js":504,"./kn":505,"./kn.js":505,"./ko":506,"./ko.js":506,"./ku":507,"./ku.js":507,"./ky":508,"./ky.js":508,"./lb":509,"./lb.js":509,"./lo":510,"./lo.js":510,"./lt":511,"./lt.js":511,"./lv":512,"./lv.js":512,"./me":513,"./me.js":513,"./mi":514,"./mi.js":514,"./mk":515,"./mk.js":515,"./ml":516,"./ml.js":516,"./mn":517,"./mn.js":517,"./mr":518,"./mr.js":518,"./ms":519,"./ms-my":520,"./ms-my.js":520,"./ms.js":519,"./mt":521,"./mt.js":521,"./my":522,"./my.js":522,"./nb":523,"./nb.js":523,"./ne":524,"./ne.js":524,"./nl":525,"./nl-be":526,"./nl-be.js":526,"./nl.js":525,"./nn":527,"./nn.js":527,"./oc-lnc":528,"./oc-lnc.js":528,"./pa-in":529,"./pa-in.js":529,"./pl":530,"./pl.js":530,"./pt":531,"./pt-br":532,"./pt-br.js":532,"./pt.js":531,"./ro":533,"./ro.js":533,"./ru":534,"./ru.js":534,"./sd":535,"./sd.js":535,"./se":536,"./se.js":536,"./si":537,"./si.js":537,"./sk":538,"./sk.js":538,"./sl":539,"./sl.js":539,"./sq":540,"./sq.js":540,"./sr":541,"./sr-cyrl":542,"./sr-cyrl.js":542,"./sr.js":541,"./ss":543,"./ss.js":543,"./sv":544,"./sv.js":544,"./sw":545,"./sw.js":545,"./ta":546,"./ta.js":546,"./te":547,"./te.js":547,"./tet":548,"./tet.js":548,"./tg":549,"./tg.js":549,"./th":550,"./th.js":550,"./tk":551,"./tk.js":551,"./tl-ph":552,"./tl-ph.js":552,"./tlh":553,"./tlh.js":553,"./tr":554,"./tr.js":554,"./tzl":555,"./tzl.js":555,"./tzm":556,"./tzm-latn":557,"./tzm-latn.js":557,"./tzm.js":556,"./ug-cn":558,"./ug-cn.js":558,"./uk":559,"./uk.js":559,"./ur":560,"./ur.js":560,"./uz":561,"./uz-latn":562,"./uz-latn.js":562,"./uz.js":561,"./vi":563,"./vi.js":563,"./x-pseudo":564,"./x-pseudo.js":564,"./yo":565,"./yo.js":565,"./zh-cn":566,"./zh-cn.js":566,"./zh-hk":567,"./zh-hk.js":567,"./zh-mo":568,"./zh-mo.js":568,"./zh-tw":569,"./zh-tw.js":569};function l(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=n,e.exports=l,l.id=590},634:function(e,t,i){},700:function(e,t,i){"use strict";i(634)},834:function(e,t,i){"use strict";i.r(t);var s,l=i(48),n=i(5),a=(i(11),i(156),i(125),i(84),i(38),i(29),i(59),i(416),i(413)),r=i(412),o=i.n(r),d=i(17),u=null===(s=window._config)||void 0===s?void 0:s.staticHost,c=[{type:"index",key:"index",label:"序号",tableOption:{width:60}},{key:"fileName",label:"名称",tableOption:{},formOption:{wraperProperties:{class:["grid-col-24"]}}},{key:"fileSize",type:"FormInput",label:"大小",formOption:{wraperProperties:{class:["grid-col-24"]}}},{key:"uploadTime",type:"FormInput",label:"上传时间",tableable:!0,formOption:{wraperProperties:{class:["grid-col-24"]}}}];var p={name:"FormUpload",mixins:[a.a],data:function(){var e=this;return console.log("----this.downloadApi----",this.downloadApi),{dialogImageUrl:"",dialogVisible:!1,fileFields:c,imgPrevUrl:u,apiPromises:{bulkdelete:function(t){var i=[];for(var s in e.fileList)s.fileId!==t.fileId&&i.push(s);return e.handleRemove(t,i),Promise.resolve({})},list:function(){return Promise.resolve({list:e.fileList,totalCount:e.fileList.length})},detail:function(e){return Promise.resolve(e)}},tableOptions:{topToolBar:null,searchFields:null,tableOption:{hasCheckbox:!1,lineActions:{update:null,detail:null,download:Object(d.b)("downloadActionOption",{apiPromise:this.item.downloadApi,label:"下载"})}},treeOption:null},fileListInit:[]}},computed:{accept:function(){var e,t,i="",s=(null===(e=this.item.properties)||void 0===e?void 0:e["list-type"])||this.item["list-type"];return["picture","picture-card"].includes(s)&&(i="img"),i||(null===(t=this.item.properties)||void 0===t?void 0:t.accept)||this.item.accept},bindOptions:function(){var e=Object.assign({},this.item);return(e=Object(n.a)(Object(n.a)({},e),e.properties)).name=e.key,e["http-request"]=e.apiPromise,e.multiple=1!=e.limit,e.disabled=!!this.getTextModel||e.disabled,e.accept=function(e){switch(e){case"img":return"image/*";case"video":return"video/*";case"doc":return".doc,.docx,.xml,application/msword,\n            application/pdf,application/vnd.ms-excel,\n            application/vnd.openxmlformats-officedocument.wordprocessingml.document,\n            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,";default:return"*"}}(this.accept),e.drag&&(e["list-type"]="text"),delete e.key,delete e.size,delete e.type,delete e.label,delete e.readonly,delete e.rules,delete e.placeholder,delete e.prepend,delete e.append,delete e.defaultValue,e},val:{get:function(){var e;return(null===(e=this.value)||void 0===e?void 0:e.map((function(e){return e.fileId||e.id})))||[]},set:function(e){this.$emit("input",e),this._valueLink(e),this.statusChangeFn.valueUpdateEvent(Object(l.a)({},this.item.key,e))}},fileList:function(){var e,t=this;return(null===(e=this.value)||void 0===e?void 0:e.filter((function(e){return e.fileId||e.id})).map((function(e){return e.fileUrl=t.imgPrevUrl+e.fileUrl,e.uploadTime=e.createTime||e.upLoadTime,e.fileName=e.fileName||e.sourceName||e.saveName||e.name,e.fileId=e.fileId||e.id,e})))||[]}},mounted:function(){var e,t=this;this.fileListInit=(null===(e=this.value)||void 0===e?void 0:e.filter((function(e){return e.fileId||e.id})).map((function(e){var i=t.imgPrevUrl+e.fileUrl.replace(/\\\\/g,"/");return console.log("----replace---",i),{url:i,fileId:e.fileId||e.id,name:e.fileName||e.sourceName||e.saveName||e.name,fileSize:e.fileSize,fileType:e.fileType,uploadTime:e.createTime||e.upLoadTime}})))||[]},methods:{handleRemove:function(e,t){this.val=this.value.filter((function(t){return t.uid!=e.uid&&t.fileId!==e.fileId}))},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess:function(e,t,i){if(e&&t.response){var s,l,n,a,r,d;s=t.response.fileId,l=t.response.fileUrl||t.url,n=t.raw.name,a=t.raw.size,r=o()(new Date).format("YYYY-MM-DD HH:mm:SS"),d=t.uid;var u=this.value||[];u.push({fileId:s,fileUrl:l,fileName:n,fileSize:a,uploadTime:r,uid:d}),this.val=u}},handleError:function(e){console.error(e)},handleBeforeUpload:function(){}}},m=(i(700),i(36)),f=Object(m.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"form-unqiue-"+e.item.key+" "+(e.getTextModel?"":"hz-img-box")+" "+("table"===e.bindOptions["list-type"]&&"upload-table-list"),style:e.item.style||{}},[e.getTextModel?e._e():i("el-upload",e._b({attrs:{action:"","file-list":e.fileListInit,"before-upload":e.handleBeforeUpload,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,disabled:e.getDisabled}},"el-upload",e.bindOptions,!1),[e.bindOptions.drag?i("div",[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.item.tip))])]):i("div",["picture-card"==e.bindOptions["list-type"]?i("i",{staticClass:"el-icon-plus"}):i("el-button",{attrs:{size:"small"}},[e._v(e._s(e.item.btn_text||"上传"))])],1),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.item.tip))])]),e._v(" "),e.getTextModel&&e.fileList.length&&"img"==e.accept?i("section",e._l(e.fileList,(function(t){return i("el-image",{key:t.fileUrl,staticClass:"mr12",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.fileUrl,"preview-src-list":e.fileList.map((function(e){return e.fileUrl}))}})})),1):e._e(),e._v(" "),e.getTextModel&&e.fileList.length&&"video"==e.accept?i("section",e._l(e.fileList,(function(e){return i("video",{key:e.fileUrl,staticClass:"mr12",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.fileUrl}})})),0):e._e(),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),"table"==e.bindOptions["list-type"]||e.getTextModel&&"img"!=e.accept&&"video"!=e.accept?i("DynamicCurd",{style:{padding:0},attrs:{fields:e.fileFields,apiPromises:e.apiPromises,optionsProps:e.tableOptions,entityLabel:"附件"}}):e._e()],1)}),[],!1,null,"16ea05ac",null);t.default=f.exports}}]);