(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{565:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(63),n(89),n(11),n(124),n(20),n(24),n(117),n(32),n(30);var r=n(90);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}},566:function(e,t,n){"use strict";var r=n(2),i=n(1),o=n(123),a=n(85),s=n(31),l=n(21),f=n(159),c=n(62),d=n(88)("splice"),u=i.TypeError,m=Math.max,h=Math.min;r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,i,d,p,y,b=l(this),v=s(b),k=o(e,v),g=arguments.length;if(0===g?n=r=0:1===g?(n=0,r=v-k):(n=g-2,r=h(m(a(t),0),v-k)),v+n-r>9007199254740991)throw u("Maximum allowed length exceeded");for(i=f(b,r),d=0;d<r;d++)(p=k+d)in b&&c(i,d,b[p]);if(i.length=r,n<r){for(d=k;d<v-r;d++)y=d+n,(p=d+r)in b?b[y]=b[p]:delete b[y];for(d=v;d>v-r+n;d--)delete b[d-1]}else if(n>r)for(d=v-r;d>k;d--)y=d+n-1,(p=d+r-1)in b?b[y]=b[p]:delete b[y];for(d=0;d<n;d++)b[d+k]=arguments[d+2];return b.length=v-r+n,i}})},594:function(e,t,n){},662:function(e,t,n){"use strict";var r=n(2),i=n(60).findIndex,o=n(158),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},663:function(e,t,n){"use strict";n(594)},762:function(e,t,n){"use strict";n.r(t);var r=n(565),i=(n(255),n(82),n(11),n(83),n(29),n(120),n(59),n(239),n(121),n(84),n(20),n(24),n(117),n(37),n(662),n(157),n(566),n(17)),o={name:"DynamicFormContent",props:{data:{type:Object,default:function(){return{}}},formProperties:{type:Object,default:function(){return{}}},formItemList:{type:Array,default:function(){return[]}},showTestTool:Boolean,showFoldBtn:{type:Boolean,default:!1},allDisabled:{type:Boolean,default:!1},borderForm:{type:Boolean,default:!0},textModel:{type:Boolean,default:!1}},data:function(){return{currentFileds:[],changeData:{allDisabled:this.allDisabled,textModel:this.textModel},foldBlockList:[],scanType:"normal",singleScanBlock:""}},watch:{data:{handler:function(e){this.computeExpressions()},deep:!0,immediate:!0}},components:{},provide:function(){return{statusChangeFn:{setElementDisable:this.setElementDisable,setElementHidden:this.setElementHidden,setElementRequired:this.setElementRequired,updateFormData:this.updateFormData,valueUpdateEvent:this.valueUpdateEvent},changeData:this.changeData,formItemType:"",childChangeData:{},transExpression:this.transExpression}},created:function(){},methods:{getFormItemListInit:function(){return this.formItemListInit||(this.formItemListInit=Object(i.g)(this.formItemList),Object.freeze(this.formItemListInit)),this.formItemListInit},computeExpressions:function(){var e=this;this.getFormItemListInit().forEach((function(t,n){var r=/#\{(.+)?\}/;if("string"==typeof t.hidden&&r.test(t.hidden)&&(e.formItemList[n].hidden=e.transExpression(t.hidden)),"string"==typeof t.disabled&&r.test(t.disabled)){var o=e.transExpression(t.disabled);e.setSectionElementDisable(e.formItemList[n].children,o)}t.children.forEach((function(t,o){for(var a in t.properties){var s=t.properties[a];if("string"==typeof s&&r.test(s)){if("required"==a){e.setElementRequired(t.key,e.transExpression(s));continue}if("value"==a){var l=e.transExpression(s);l!=e.data[t.key]&&e.$set(e.data,t.key,l);continue}e.formItemList[n].children[o].properties[a]=e.transExpression(s)}if("function"==typeof s){var f=s(e.data[t.key],Object(i.g)(e.data));f!==e.data[t.key]&&e.$set(e.data,t.key,f)}}"string"==typeof t.hidden&&r.test(t.hidden)&&(e.formItemList[n].children[o].hidden=e.transExpression(t.hidden))}))}))},transExpression:function(e){var t=this.data;return-1==(e=e.replace(/#\{(.+?)\}/g,"instance.$1")).indexOf("return")&&(e="return ".concat(e)),new Function("instance",e)(t)},valueUpdateEvent:function(e){var t=this;this.$emit("formDataUpdated",this,e),this.formItemForEach((function(e){e.formDataUpdateHandle&&e.formDataUpdateHandle(t.data[e.key],t.data)}))},getData:function(){return this.filterData(this.data)},updateFormData:function(e){var t=this;Object.keys(e).forEach((function(n){t.$set(t.data,n,e[n])}))},validate:function(e){var t=this;this.$refs.form.validate((function(n){if(n){var r=Object(i.a)(t.getData()),o=[];if(t.formItemList.forEach((function(e){e.children&&e.children.length>0&&e.children.forEach((function(e){"child-form"===e.type&&o.push(e.key)}))})),0===o.length)e(!!n,r);else{var a=o.map((function(e){return t.$refs[e][0].validateForm()}));Promise.all(a).then((function(){e(!!n,r)})).catch((function(){e(!1,r)}))}}}))},filterData:function(e){var t={};return this.formItemForEach((function(n){var r;"slot"!==n.type&&(t[n.key]=null!==(r=e[n.key])&&void 0!==r?r:"",Array.isArray(e[n.key])&&(t[n.key]=e[n.key].filter((function(e){return null!=e}))))})),t},formItemForEach:function(e){var t,n=Object(r.a)(this.formItemList);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.children&&i.children.length>0){var o,a=Object(r.a)(i.children);try{for(a.s();!(o=a.n()).done;){if(e(o.value))return}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}},setElementRequired:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.formItemForEach((function(r){if(r.key==e){var i=r.rules;if(i.length){var o=i.findIndex((function(e){return void 0!==e.required}));o>=0?i[o].required=n:i=i.push({required:n,message:"请输入",trigger:["change"]})}else i=[{required:n,message:"请输入",trigger:["change"]}];return t.$set(r,"rules",i),!0}}))},setSectionElementDisable:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((function(e,r){t.setElementDisable(e.key,n)}))},setElementDisable:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.formItemForEach((function(r){if(r.key==e)return r.properties instanceof Object?t.$set(r.properties,"disabled",n):t.$set(r,"properties",{disabled:n}),!0}))},setElementHidden:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.formItemForEach((function(r){if(r.key==e)return t.$set(r,"hidden",n),!0}))},resetFields:function(){var e=this;this.$refs.form.resetFields(),this.formItemForEach((function(t){if(["FormChildForm","FormCurd"].includes(t.type)){var n=e.$refs[t.key];n instanceof Array?n[0].resetFields():n.resetFields()}}))},foldBlock:function(e){var t=e.label,n=this.foldBlockList.indexOf(t);-1===n?this.foldBlockList.push(e.label):this.foldBlockList.splice(n,1)},isBlocked:function(e){return this.foldBlockList.indexOf(e.label)>-1},getBlockClass:function(e){var t=e.class;return Object.assign({},t,{"block-item":this.borderForm,"block-hide":this.foldBlockList.indexOf(e.label)>-1})},getFormItemLabel:function(e){return["left","right"].includes(this.formProperties["label-position"])&&e.label?e.label+":":e.label}}},a=(n(663),n(36)),s=Object(a.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"dynamic-form",class:{"form-text-mode":e.textModel}},[n("el-form",e._b({ref:"form",class:{"border-form":e.borderForm},attrs:{model:e.data,"validate-on-rule-change":!0}},"el-form",e.formProperties,!1),[e._l(e.formItemList,(function(t){return[t.hidden?e._e():n("main",{key:t.label,staticClass:"pb12",class:e.getBlockClass(t)},[t.label?n("header",{staticClass:"block-nav flex justify-between "},[n("span",{staticClass:"block-text"},[e._v(e._s(t.label))]),e._v(" "),e.showFoldBtn&&!e.textModel?n("span",{staticClass:"block-fold-btn",on:{click:function(n){return e.foldBlock(t)}}},[e._v("\n          "+e._s(e.isBlocked(t)?"展开":"收起")+"\n          "),n("i",{class:["el-icon-arrow-"+(e.isBlocked(t)?"down":"up")]})]):e._e()]):e._e(),e._v(" "),n("article",{staticClass:"block-content grid-wrap relative   "},[e._l(t.children,(function(t){return["slot"==t.type?n(t.wrapertype,e._b({key:t.key,tag:"component",attrs:{label:e.getFormItemLabel(t)}},"component",t.wraperProperties,!1),[e._t(t.key)],2):"FormHide"==t.type?n("FormHide",{key:t.key,model:{value:e.data[t.key],callback:function(n){e.$set(e.data,t.key,n)},expression:"data[formItem.key]"}}):t.hidden?e._e():n("el-form-item",e._b({key:t.key,attrs:{rules:e.textModel?[]:t.rules,label:e.getFormItemLabel(t),prop:t.key}},"el-form-item",t.wraperProperties,!1),[n(t.type||"FormInput",{key:t.key,ref:t.key,refInFor:!0,tag:"component",attrs:{item:t},model:{value:e.data[t.key],callback:function(n){e.$set(e.data,t.key,n)},expression:"data[formItem.key]"}})],1)]}))],2)])]}))],2),e._v(" "),e.showTestTool?n("testTool",{attrs:{fields:e.formItemList,refFormName:"form"}}):e._e()],1)}),[],!1,null,"8bde572c",null);t.default=s.exports}}]);