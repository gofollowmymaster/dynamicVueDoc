(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{414:function(e,t,i){var n=i(4),a=i(34),o=i(16),s=/"/g,r=n("".replace);e.exports=function(e,t,i,n){var c=o(a(e)),l="<"+t;return""!==i&&(l+=" "+i+'="'+r(o(n),s,"&quot;")+'"'),l+">"+c+"</"+t+">"}},415:function(e,t,i){var n=i(3);e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},418:function(e,t,i){"use strict";var n=i(12),a=(i(419),i(111),i(108));t.a={props:{},computed:{},methods:{actionHandles:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(i.actionType){case"dialogPage":"el-drawer"==(e=i.dialog).container&&(e.properties=Object(n.a)({size:e.properties.width,direction:"rtl"},e.properties)),this.dialogPageHandle(i,a);break;case"dialogForm":"el-drawer"==(e=i.dialog).container&&(e.properties=Object(n.a)({size:e.properties.width,direction:"rtl"},e.properties)),this.dialogFormHandle(i,a);break;case"requestApi":this.requestApiHandle(i,a);break;case"submit":var o=this.$refs.DynamicFormContent||this.$parent.$refs.DynamicFormContent;o?o.validate((function(e,n){console.log("---submit---",n),e&&t.requestApiHandle(i,n)})):console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,");break;case"reset":var s=this.$refs.DynamicFormContent||this.$parent.$refs.DynamicFormContent;s?s.resetFields():console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,");break;case"close":this.closeModalHandle(i);break;case"link":this.linkHandle(i);break;case"router":this.routerHandle(i);break;default:this.customActionHandle(i,a)}},requestApiHandle:function(e,t){var i=this,n="function"==typeof e.dataAdapter?e.dataAdapter:function(e){return e};e.apiPromise(t).then(n).then((function(t){if(e.callback instanceof Object)for(var n in e.callback)"function"==typeof i[n+"Handle"]&&i[n+"Handle"](e.callback[n],t)}))},closeModalHandle:function(e){this.closeModal(this)},closeModal:function(e){if(e.visible)return e.visible instanceof Object?void(e.visible.value=!1):void(e.visible=!1);"function"!=typeof e.close?e.closeModal(this.$parent):e.close()},refreshHandle:function(e){"function"!=typeof e?!0===e&&("function"==typeof this.refresh?this.refresh():this.$dynamicBus.$emit("dynamicRefresh")):e()},emitEventHandle:function(e,t){"string"==typeof e&&this.$emit(e,t)},showTipHandle:function(e,t){!0===e&&this.$message&&this.$message({type:"success",message:t.msg||t.message||"操作成功"})},linkHandle:function(e){window.open(e.link,e.window)},routerHandle:function(e){(this.$router[e.routerAction]||this.$router.push)(e.router)},customActionHandle:function(e,t){"function"!=typeof e.actionHandle?console.warn("定义了未被识别的动作"+JSON.stringify(e)):e.actionHandle(t)},dialogPageHandle:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="function"==typeof e.dataAdapter?e.dataAdapter:function(e){return e||{}};if(e.apiPromise)e.apiPromise(i).then(a).then((function(i){t.setCurrentDialogContent(e,i,n)}));else{var o=a(i);this.setCurrentDialogContent(e,o,n)}},dialogFormHandle:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="function"==typeof e.dataAdapter?e.dataAdapter:function(e){return e||{}};if(e.apiPromise)e.apiPromise(i).then(a).then((function(i){t.setCurrentDialogForm(e,i,n)}));else{var o=a(i);this.setCurrentDialogForm(e,o,n)}},setCurrentDialogForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.currentDialogForm=Object(n.a)(Object(n.a)({container:"el-dialog"},Object(a.f)(e.dialog)),i),this.currentDialogForm.body.data=t,this.$globalDialogForm(this.currentDialogForm,this.actionBarWraper)},setCurrentDialogContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.currentDialogContent=Object(n.a)(Object(n.a)({container:"el-dialog"},Object(a.f)(e.dialog)),i),this.currentDialogContent.data=t,this.$globalDialogPage(this.currentDialogContent,this.actionBarWraper)}}}},419:function(e,t,i){"use strict";var n=i(2),a=i(414);n({target:"String",proto:!0,forced:i(415)("link")},{link:function(e){return a(this,"a","href",e)}})},580:function(e,t,i){},637:function(e,t,i){"use strict";i(580)},742:function(e,t,i){"use strict";i.r(t);var n=i(150),a=i(12),o=i(108),s=i(418),r=i(156),c={name:"DynamicCurd",props:{fields:{type:Array,required:!1,default:function(){return[]}},optionsProps:{type:Object,require:!0},isDebuggerMode:{type:Boolean,default:!0},apiPromises:{type:Object,default:function(){return{}}},entityLabel:String},mixins:[s.a],data:function(){return console.log("--optionsProps--",this.optionsProps),{searchParams:{refreshKey:""},pagination:{pageNo:1,pageSize:r.c.pageSize},total:1}},computed:{curdOpions:function(){var e=this;return Object(o.n)(Object(o.g)({searchForm:r.e,treeOption:r.g,pagination:r.c,topToolBar:{create:Object(o.g)(r.b,{label:"新增",permission:"新增",isloadData:!1,dialog:{properties:{title:"新增"+this.entityLabel,width:"60%"},body:{formItemList:Object(o.c)(this.fields,this.formSections),actions:{save:{apiPromise:this.apiPromises.create}}}}}),bulkdelete:Object(o.g)(r.d,{label:"批量删除",permission:"批量删除",popconfirm:{title:"确定删除选择的信息吗？"},apiPromise:this.apiPromises.bulkdelete||this.apiPromises.delete})},searchFields:Object(o.d)(this.fields),tableFields:Object(o.e)(this.fields),tableOption:Object(a.a)(Object(a.a)({},r.f),{},{loadListApi:this.apiPromises.list,"current-change":"handleCurrentChange",lineActions:{update:Object(o.g)(r.b,{label:"更新",permission:"更新",sort:0,dialog:{properties:{title:"新增表单"+this.entityLabel,width:"60%"},body:{formItemList:Object(o.c)(this.fields,this.formSections),actions:{save:{label:"更改",apiPromise:this.apiPromises.update}}}}}),detail:Object(o.g)(r.b,{label:"查看",permission:"查看",sort:0,apiPromise:this.apiPromises.detail,dialog:{properties:{title:this.entityLabel+"详情"},body:{props:{textModel:!0},formItemList:Object(o.c)(this.fields,this.formSections),btns:{save:null}}}}),delete:Object(o.g)(r.d,{label:"删除",sort:10,permission:"删除",apiPromise:this.apiPromises.delete||this.apiPromises.bulkdelete})}})},this.optionsProps,!0),(function(t,i){return"showTestTool"==t?!!e.isDebuggerMode:i[t]}))},queryParams:function(){return Object(a.a)(Object(a.a)({},this.searchParams),this.pagination)},loadListApiPromise:function(){var e=this;return this.curdOpions.tableOption.loadListApi(this.queryParams).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=t.data||t,e.total=t.totalCount,t.list}))}},created:function(){var e=this;this.selected=[],this.pagination.pageSize=this.curdOpions.pagination.pageSize||this.pagination.pageSize,this.$dynamicBus.$on("dynamicRefresh",(function(){e.refresh()})),console.log("----this.curdOpions----",this.curdOpions)},methods:{handleSizeChange:function(e){this.refresh()},handleCurrentChange:function(e){this.pagination.pageNo=e,this.onSearch({pageNo:e})},treeClick:function(e,t){this.onSearch(Object(n.a)({},this.curdOpions.treeOption.fieldName,e[this.curdOpions.treeOption["node-key"]]))},onSearch:function(e){this.searchParams=Object(a.a)(Object(a.a)({},this.searchParams),e)},refresh:function(){var e=this.searchParams.refreshKey++;this.onSearch({refreshKey:e})},actionHandle:function(e){if(e.isloadData&&this.selected.length<1)this.$message({type:"warning",message:"您没有选择任何数据"});else{var t=e.isloadData?this.selected:null;this.actionHandles(e,t)}},selecctChange:function(e){this.selected=e}}},l=(i(637),i(33)),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"p20 flex flex-direction"},[e.curdOpions.searchFields&&e.curdOpions.searchFields.length?i("DynamicSearchForm",{attrs:{fields:e.curdOpions.searchFields,options:e.curdOpions.searchForm},on:{search:e.onSearch}}):e._e(),e._v(" "),e.curdOpions.topToolBar?i("section",{staticClass:"my12 "},[i("DynamicActions",{attrs:{actions:e.curdOpions.topToolBar,actionData:e.selected,actionBarWraper:e.$parent.$el}})],1):e._e(),e._v(" "),i("section",{staticClass:"grid-wrap  full-width"},[e.curdOpions.treeOption?i("div",{staticClass:"scroll p10 border grid-col-4   grid-col-xs-12 grid-col-pp-24"},[i("el-tree",e._b({on:{"node-click":e.treeClick}},"el-tree",e.curdOpions.treeOption,!1))],1):e._e(),e._v(" "),i("section",{staticClass:"flex flex-direction",class:[e.curdOpions.treeOption?"grid-col-20  grid-col-xs-12 grid-col-pp-24":"grid-col-24"]},[i("DynamicTable",{staticClass:"table-wraper flex1",attrs:{table:e.curdOpions.tableOption,columns:e.curdOpions.tableFields,apiPromise:e.loadListApiPromise},on:{"selecct-change":e.selecctChange}}),e._v(" "),i("el-pagination",e._b({staticClass:"mt16",attrs:{background:"",total:e.total,pageSize:e.pagination.pageSize},on:{"size-change":e.handleSizeChange,"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)},"current-change":e.handleCurrentChange}},"el-pagination",e.curdOpions.pagination,!1))],1)])],1)}),[],!1,null,"90e3034e",null);t.default=d.exports}}]);