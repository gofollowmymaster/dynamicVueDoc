(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{420:function(t,e,i){var n=i(3),o=i(40),a=i(16),r=/"/g,s=n("".replace);t.exports=function(t,e,i,n){var l=a(o(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+s(a(n),r,"&quot;")+'"'),c+">"+l+"</"+e+">"}},421:function(t,e,i){var n=i(4);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},423:function(t,e,i){"use strict";var n=i(2),o=i(420);n({target:"String",proto:!0,forced:i(421)("link")},{link:function(t){return o(this,"a","href",t)}})},571:function(t,e,i){"use strict";i(423),i(29),i(59),i(119);var n=i(5),o=i(50),a=i(51),r=i(17);function s(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)return t.visible?t.visible instanceof Object?void(t.visible.value=!1):void(t.visible=!1):void("function"!=typeof t.close?s(t.$parent,e):t.close())}var l={reset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var i=t.$refs.DynamicFormContent||t.$parent.$refs.DynamicFormContent;i?i.resetFields():console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,")}},refresh:function(t,e){"function"!=typeof e?!0===e&&("function"==typeof t.refresh?t.refresh():t.$dynamicBus.$emit("dynamicRefresh")):e()},emitEvent:function(t,e,i){"string"==typeof e&&t.$emit(e,i)},closeModal:s,close:s,showTip:function(t,e,i){!0===e&&t.$message&&t.$message({type:"success",message:i.msg||i.message||"操作成功"})}},c={dialogForm:function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,null,[{key:"handle",value:function(t,e,i){this.vm=i;var o=t.dialog;"el-drawer"==o.container&&(o.properties=Object(n.a)({size:o.properties.width,direction:"rtl"},o.properties)),this.dialogFormHandle(t,e)}},{key:"dialogFormHandle",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t||{}};if(t.apiPromise)t.apiPromise(i).then(o).then((function(i){e.setCurrentDialogForm(t,i,n)}));else{var a=o(i);this.setCurrentDialogForm(t,a,n)}}},{key:"setCurrentDialogForm",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(n.a)(Object(n.a)({container:"el-dialog"},Object(r.g)(t.dialog)),i);o.body.data=e,"function"!=typeof this.vm.setGlobalDialogForm?this.vm.$globalDialogForm(o,this.vm.actionBarWraper):this.vm.setGlobalDialogForm(o)}}]),t}(),dialogPage:function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,null,[{key:"handle",value:function(t,e,i){this.vm=i;var o=t.dialog;"el-drawer"==o.container&&(o.properties=Object(n.a)({size:o.properties.width,direction:"rtl"},o.properties)),this.dialogPageHandle(t,e)}},{key:"dialogPageHandle",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t||{}};if(t.apiPromise)t.apiPromise(i).then(o).then((function(i){e.setCurrentDialogContent(t,i,n)}));else{var a=o(i);this.setCurrentDialogContent(t,Object(r.a)(a),n)}}},{key:"setCurrentDialogContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(n.a)(Object(n.a)({container:"el-dialog"},Object(r.g)(t.dialog)),i);o.data=e,"function"!=typeof this.vm.setGlobalDialogPage?this.vm.$globalDialogPage(o,this.vm.actionBarWraper):this.vm.setGlobalDialogPage(o)}}]),t}(),requestApi:function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,null,[{key:"handle",value:function(t,e,i){var n=this;this.vm=i;var o="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t};t.apiPromise(e).then(o).then((function(e){return n.actionCallback(t,e),e}))}},{key:"actionCallback",value:function(t,e){if(t.callback instanceof Object)for(var i in t.callback)"function"==typeof t.callback[i]&&t.callback[i](this.vm,e),"function"==typeof l[i]&&l[i](this.vm,t.callback[i],e)}}]),t}(),download:function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,null,[{key:"handle",value:function(t,e,i){var n=this;this.vm=i;var o="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t};t.apiPromise(e).then(o).then((function(e){var i,n,o=null!==(i=t.fileName)&&void 0!==i?i:null===(n=e.headers["content-disposition"])||void 0===n?void 0:n.replace(/.*=(.*\.\w+)/g,"$1");Object(r.j)(e.data,decodeURIComponent(o))})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.actionCallback(t,e),e}))}},{key:"actionCallback",value:function(t,e){if(t.callback instanceof Object)for(var i in t.callback)"function"==typeof t.callback[i]&&t.callback[i](this.vm,e),"function"==typeof l[i+"Handle"]&&l[i+"Handle"](this.vm,t.callback[i],e)}}]),t}()};e.a={props:{},computed:{},inject:["setGlobalDialogForm","setGlobalDialogPage"],methods:{actionHandles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.actionType){case"dialogPage":case"dialogForm":case"requestApi":case"download":c[t.actionType].handle(t,e,this);break;case"submit":case"reset":case"close":case"link":case"router":"function"==typeof this[t.actionType+"Handle"]&&this[t.actionType+"Handle"](t,e),l[t.actionType]&&l[t.actionType](this);break;case"routerDialogPage":case"routerDialogForm":this.routerDialogHandle(t,e);break;default:this.customActionHandle(t,e)}},submitHandle:function(t){var e=this,i=this.$refs.DynamicFormContent||this.$parent.$refs.DynamicFormContent;i?i.validate((function(i,n){i&&c.requestApi.handle(t,n,e)})):console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,")},linkHandle:function(t){window.open(t.link,t.window)},routerHandle:function(t,e){var i="function"==typeof t.router?t.router(e):t.router;this.$router[t.routerAction||"push"](i)},routerDialogHandle:function(t,e){var i,n=t.mainKey||"id",o={};"function"==typeof t.router?i=t.router(e):(i=this.$route.fullPath.replace(/[\/|\\]$/,"")+"/",t=t.router&&"string"==typeof t.router?t.router.replace(/[\/|\\]$/,"")+"/":t.actionKey,o={id:null==e?void 0:e[n],action:t}),this.$router[t.routerAction||"push"]({path:i,query:o})},customActionHandle:function(t,e){"function"!=typeof t.actionHandle?console.warn("定义了未被识别的动作"+JSON.stringify(t)):t.actionHandle(e)}}}},589:function(t,e,i){"use strict";var n=i(17);e.a={props:{},computed:{},methods:{generateCreateOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog",e="router"==t?"routerDialogFormActionOption":"dialogFormActionOption";return Object(n.b)(e,{label:"新增",permission:"新增",router:"create",sort:50,isLoadData:!1,dialog:{properties:{title:"新增"+this.entityLabel,width:"60%"},body:{formItemList:Object(n.d)(this.fields,this.formSections),actions:{save:{apiPromise:this.apiPromises.create}}}}})},generateBulkDeleteOptions:function(){return Object(n.b)("requestApiActionOption",{label:"批量删除",permission:"批量删除",popconfirm:{title:"确定删除选择的信息吗？"},actionDataKey:"selected",apiPromise:this.apiPromises.bulkdelete||this.apiPromises.delete})},generateDeleteOptions:function(){return Object(n.b)("requestApiActionOption",{sort:200,label:"删除",permission:"删除",apiPromise:this.apiPromises.delete||this.apiPromises.bulkdelete})},generateUpdateOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog",e="router"==t?"routerDialogFormActionOption":"dialogFormActionOption";return Object(n.b)(e,{label:"编辑",router:"update",permission:"编辑",apiPromise:this.apiPromises.detail,dialog:{properties:{title:"编辑"+this.entityLabel,width:"60%"},body:{formItemList:Object(n.d)(this.fields,this.formSections),actions:{save:{label:"保存",apiPromise:this.apiPromises.update}}}}})},generateDetailOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog",e="router"==t?"routerDialogFormActionOption":"dialogFormActionOption";return Object(n.b)(e,{label:"详情",router:"detail",permission:"详情",apiPromise:this.apiPromises.detail,properties:{type:"default"},dialog:{properties:{title:this.entityLabel+"详情"},body:{props:{textModel:!0,formProperties:{"label-position":"left","label-width":"130px"}},formItemList:Object(n.c)(this.fields,this.formSections),actions:{save:null}}}})},generateActionOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog",e=this.generateCreateOptions(t),i=this.generateBulkDeleteOptions(),n=this.generateUpdateOptions(t),o=this.generateDetailOptions(t),a=this.generateDeleteOptions();return{createOptions:e,bulkdeleteOptions:i,updateOptions:n,detailOptions:o,deleteOptions:a}},generatePageActionOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog",e=this.generateCreateOptions(t),i=this.generateUpdateOptions(t),n=this.generateDetailOptions(t);return{create:e,update:i,detail:n}}}}},597:function(t,e,i){},668:function(t,e,i){"use strict";i(597)},792:function(t,e,i){"use strict";i.r(e);var n=i(5),o=(i(239),i(240),i(38),i(11),i(123),i(250),i(29),i(59),i(17)),a=(i(161),i(571)),r=i(589),s={name:"DynamicDetailPage",mixins:[a.a,r.a],props:{fields:{type:Array,required:!1,default:function(){return[]}},optionsProps:{type:Object,require:!0},apiPromises:{type:Object,default:function(){return{}}},formSections:{type:Object,default:function(){return{}}},detailId:[String,Number,Object],actionKey:[String],entityLabel:String},data:function(){return{pageOpened:!1}},computed:{lineActions:function(){var t=this.generatePageActionOptions("router"),e=this.optionsProps.tableOption.lineActions||{},i=this.optionsProps.topToolBar,a=Object(o.h)(t,Object(n.a)(Object(n.a)({},i),e),!0);for(var r in a){var s=a[r].actionType;(!s||s.toLowerCase().indexOf("dialog")<0)&&delete a[r]}return a},actionAndDetailid:function(){return{detailId:this.detailId,actionKey:this.actionKey}}},watch:{actionAndDetailid:{handler:function(t){var e=t.actionKey,i=t.detailId;i||e?this.openPage(i,e):this.closeDetail()},immediate:!0,deep:!0}},created:function(){},mounted:function(){},methods:{openPage:function(t,e){var i,n,a=this;this.lineActions[e]||(e=Object.keys(this.lineActions).filter((function(t){return a.lineActions[t]})).filter((function(t){return t.startsWith("detail")}))[0]);var r=Object(o.g)(this.lineActions[e]),s=t instanceof Object?t:{id:t||""};r.actionType.startsWith("router")&&(r.actionType=r.actionType.replace("router","").replace(/(^\w)/,(function(t){return t.toLowerCase()}))),null!==(i=r.dialog)&&void 0!==i&&i.properties&&(r.dialog.properties.navType="router"),r.dialog.container="DyPage",null!==(n=r.dialog.body)&&void 0!==n&&n.actions&&(r.dialog.body.actions={}),this.actionHandles(r,s),this.pageOpened=!0},closeDetail:function(){!0===this.pageOpened&&this.actionHandles({actionType:"close"})}}},l=(i(668),i(36)),c=Object(l.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,"cc6ce6f0",null);e.default=c.exports}}]);