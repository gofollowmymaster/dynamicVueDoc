(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{420:function(t,e,n){var o=n(3),a=n(40),i=n(16),r=/"/g,c=o("".replace);t.exports=function(t,e,n,o){var l=i(a(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+c(i(o),r,"&quot;")+'"'),s+">"+l+"</"+e+">"}},421:function(t,e,n){var o=n(4);t.exports=function(t){return o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},423:function(t,e,n){"use strict";var o=n(2),a=n(420);o({target:"String",proto:!0,forced:n(421)("link")},{link:function(t){return a(this,"a","href",t)}})},571:function(t,e,n){"use strict";n(423),n(29),n(59),n(119);var o=n(5),a=n(50),i=n(51),r=n(17);function c(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)return t.visible?t.visible instanceof Object?void(t.visible.value=!1):void(t.visible=!1):void("function"!=typeof t.close?c(t.$parent,e):t.close())}var l={reset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=t.$refs.DynamicFormContent||t.$parent.$refs.DynamicFormContent;n?n.resetFields():console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,")}},refresh:function(t,e){"function"!=typeof e?!0===e&&("function"==typeof t.refresh?t.refresh():t.$dynamicBus.$emit("dynamicRefresh")):e()},emitEvent:function(t,e,n){"string"==typeof e&&t.$emit(e,n)},closeModal:c,close:c,showTip:function(t,e,n){!0===e&&t.$message&&t.$message({type:"success",message:n.msg||n.message||"操作成功"})}},s={dialogForm:function(){function t(){Object(a.a)(this,t)}return Object(i.a)(t,null,[{key:"handle",value:function(t,e,n){this.vm=n;var a=t.dialog;"el-drawer"==a.container&&(a.properties=Object(o.a)({size:a.properties.width,direction:"rtl"},a.properties)),this.dialogFormHandle(t,e)}},{key:"dialogFormHandle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t||{}};if(t.apiPromise)t.apiPromise(n).then(a).then((function(n){e.setCurrentDialogForm(t,n,o)}));else{var i=a(n);this.setCurrentDialogForm(t,i,o)}}},{key:"setCurrentDialogForm",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(o.a)(Object(o.a)({container:"el-dialog"},Object(r.g)(t.dialog)),n);a.body.data=e,"function"!=typeof this.vm.setGlobalDialogForm?this.vm.$globalDialogForm(a,this.vm.actionBarWraper):this.vm.setGlobalDialogForm(a)}}]),t}(),dialogPage:function(){function t(){Object(a.a)(this,t)}return Object(i.a)(t,null,[{key:"handle",value:function(t,e,n){this.vm=n;var a=t.dialog;"el-drawer"==a.container&&(a.properties=Object(o.a)({size:a.properties.width,direction:"rtl"},a.properties)),this.dialogPageHandle(t,e)}},{key:"dialogPageHandle",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t||{}};if(t.apiPromise)t.apiPromise(n).then(a).then((function(n){e.setCurrentDialogContent(t,n,o)}));else{var i=a(n);this.setCurrentDialogContent(t,Object(r.a)(i),o)}}},{key:"setCurrentDialogContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(o.a)(Object(o.a)({container:"el-dialog"},Object(r.g)(t.dialog)),n);a.data=e,"function"!=typeof this.vm.setGlobalDialogPage?this.vm.$globalDialogPage(a,this.vm.actionBarWraper):this.vm.setGlobalDialogPage(a)}}]),t}(),requestApi:function(){function t(){Object(a.a)(this,t)}return Object(i.a)(t,null,[{key:"handle",value:function(t,e,n){var o=this;this.vm=n;var a="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t};t.apiPromise(e).then(a).then((function(e){return o.actionCallback(t,e),e}))}},{key:"actionCallback",value:function(t,e){if(t.callback instanceof Object)for(var n in t.callback)"function"==typeof t.callback[n]&&t.callback[n](this.vm,e),"function"==typeof l[n]&&l[n](this.vm,t.callback[n],e)}}]),t}(),download:function(){function t(){Object(a.a)(this,t)}return Object(i.a)(t,null,[{key:"handle",value:function(t,e,n){var o=this;this.vm=n;var a="function"==typeof t.dataAdapter?t.dataAdapter:function(t){return t};t.apiPromise(e).then(a).then((function(e){var n,o,a=null!==(n=t.fileName)&&void 0!==n?n:null===(o=e.headers["content-disposition"])||void 0===o?void 0:o.replace(/.*=(.*\.\w+)/g,"$1");Object(r.j)(e.data,decodeURIComponent(a))})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.actionCallback(t,e),e}))}},{key:"actionCallback",value:function(t,e){if(t.callback instanceof Object)for(var n in t.callback)"function"==typeof t.callback[n]&&t.callback[n](this.vm,e),"function"==typeof l[n+"Handle"]&&l[n+"Handle"](this.vm,t.callback[n],e)}}]),t}()};e.a={props:{},computed:{},inject:["setGlobalDialogForm","setGlobalDialogPage"],methods:{actionHandles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.actionType){case"dialogPage":case"dialogForm":case"requestApi":case"download":s[t.actionType].handle(t,e,this);break;case"submit":case"reset":case"close":case"link":case"router":"function"==typeof this[t.actionType+"Handle"]&&this[t.actionType+"Handle"](t,e),l[t.actionType]&&l[t.actionType](this);break;case"routerDialogPage":case"routerDialogForm":this.routerDialogHandle(t,e);break;default:this.customActionHandle(t,e)}},submitHandle:function(t){var e=this,n=this.$refs.DynamicFormContent||this.$parent.$refs.DynamicFormContent;n?n.validate((function(n,o){n&&s.requestApi.handle(t,o,e)})):console.warn("submit 动作 在组件中没有定义对应的 DynamicFormContent 表单 ref,")},linkHandle:function(t){window.open(t.link,t.window)},routerHandle:function(t,e){var n="function"==typeof t.router?t.router(e):t.router;this.$router[t.routerAction||"push"](n)},routerDialogHandle:function(t,e){var n,o=t.mainKey||"id",a={};"function"==typeof t.router?n=t.router(e):(n=this.$route.fullPath.replace(/[\/|\\]$/,"")+"/",t=t.router&&"string"==typeof t.router?t.router.replace(/[\/|\\]$/,"")+"/":t.actionKey,a={id:null==e?void 0:e[o],action:t}),this.$router[t.routerAction||"push"]({path:n,query:a})},customActionHandle:function(t,e){"function"!=typeof t.actionHandle?console.warn("定义了未被识别的动作"+JSON.stringify(t)):t.actionHandle(e)}}}},595:function(t,e,n){},666:function(t,e,n){"use strict";n(595)},790:function(t,e,n){"use strict";n.r(e);var o=n(5),a=n(49),i=(n(239),n(84),n(238),n(246),n(571)),r=n(17),c={name:"DynamicActions",mixins:[i.a],props:{actions:{type:[Object,Array],default:function(){return{}}},actionData:{type:[Object,Array,String,Boolean,Number],default:function(){return{}}},actionBarWraper:{type:[HTMLElement,Object]}},computed:{actionsOrdered:function(){var t=Object.entries(this.actions).map((function(t,e){var n=Object(a.a)(t,2),i=n[0],r=n[1];return Object(o.a)(Object(o.a)({},r),{},{actionKey:i})}));return t.sort((function(t,e){return t.sort-e.sort})),t}},methods:{actionHandle:function(t){var e=t.actionDataKey?this.actionData[t.actionDataKey]:this.actionData;!1!==t.isLoadData&&Object(r.o)(e)?this.$message({type:"warning",message:"您没有选择任何数据"}):(!1===t.isLoadData&&(e=null),this.actionHandles(t,e))}}},l=(n(666),n(36)),s=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:" "},[t._l(t.actionsOrdered,(function(e,o){return[e.popconfirm?n("el-popconfirm",t._b({key:o,staticClass:"ml6",on:{confirm:function(n){return t.actionHandle(e)}}},"el-popconfirm",e.popconfirm,!1),[n(e.component,t._b({directives:[{name:"permission",rawName:"v-permission",value:e.permission||e.label,expression:"item.permission||item.label"}],tag:"component",attrs:{slot:"reference"},domProps:{textContent:t._s(e.label)},slot:"reference"},"component",e.properties,!1))],1):n(e.component,t._b({directives:[{name:"permission",rawName:"v-permission",value:e.permission,expression:"item.permission"}],key:o,tag:"component",staticClass:"ml6",domProps:{textContent:t._s(e.label)},on:{click:function(n){return t.actionHandle(e)}}},"component",e.properties,!1))]}))],2)}),[],!1,null,"b5b88b1e",null);e.default=s.exports}}]);