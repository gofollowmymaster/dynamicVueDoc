(window.webpackJsonp=window.webpackJsonp||[]).push([[59,92],{413:function(e,t,n){"use strict";var a=n(49),i=n(37),l=n(48),o=n(5),s=(n(239),n(82),n(11),n(83),n(238),n(240),n(29),n(241),n(59),n(17));t.a={props:{item:{type:Object,default:function(){return{}}},value:[String,Number,Array,Boolean],allDisabled:{type:Boolean,default:!1},randomId:{type:String,default:""}},inject:["changeData","statusChangeFn","formItemType","childChangeData","transExpression"],computed:{bindOptions:function(){var e=Object.assign({},this.item);return delete(e=Object(o.a)(Object(o.a)({},e),e.properties)).wraperProperties,delete e.key,delete e.type,delete e.label,delete e.readonly,delete e.rules,delete e.placeholder,delete e.prepend,delete e.append,delete e.defaultValue,delete e.extra,delete e.properties,delete e.options,delete e.groupProperties,e.maxlength=e.maxlength||255,e},getDisabled:function(){return!!this.allDisabled||this.item.properties.disabled},val:{get:function(){return this.value},set:function(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent(Object(l.a)({},this.item.key,e)):this.childChangeData.valueUpdateEvent()}},getTextModel:function(){return!!this.item.isText||!!this.changeData.textModel}},created:function(){Object(s.m)(this.item.defaultValue)&&(this.val=Object(s.m)(this.value)?this.value:this.item.defaultValue)},methods:{getPlaceholder:function(e){return e.disable?"":e.placeholder?e.placeholder:"请输入".concat(e.label)},getSelectPlaceholder:function(e){return e.disable?"":void 0!==e.placeholder&&null!==e.placeholder?e.placeholder:"请选择".concat(e.label)},onFocus:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onFocus&&this.item.events.onFocus({event:e,option:this.item,value:this.value})},onBlur:function(e){var t;null!==(t=this.item.events)&&void 0!==t&&t.onBlur&&this.item.events.onBlur({event:e,option:this.item,value:this.value})},_valueLink:function(e){"childForm"===this.formItemType?this._valueLinkByChildForm(e):this._valueLinkByForm(e)},_valueLinkByForm:function(e){var t=this;"object"===Object(i.a)(this.item.valueLink)&&Object.entries(this.item.valueLink).forEach((function(n){var i=Object(a.a)(n,2),l=i[0],o=i[1];"@*any*@"!==l?e===l&&t._valueLinkHandle(o,e):t._valueLinkHandle(o,e)}))},_valueLinkHandle:function(e,t){var n=this;e.length>0&&Object.entries(e).forEach((function(e){var i=Object(a.a)(e,2),o=(i[0],i[1]),r=o.linkKey,u=o.linkValue,c=o.linkDisable,d=o.linkHidden,p=o.linkRequired;Object(s.m)(u)&&("function"==typeof u&&(u=u(t)),n.statusChangeFn.updateFormData(Object(l.a)({},r,u))),Object(s.m)(c)&&n.statusChangeFn.setElementDisable(r,c),Object(s.m)(d)&&n.statusChangeFn.setElementHidden(r,d),Object(s.m)(p)&&n.statusChangeFn.setElementRequired(r,p)}))},_valueLinkByChildForm:function(e){},throwPointRightZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var n=t.split("."),a=n[1];return 0===(a=a.replace(/[0]+$/g,"")).length?n[0]:n[0]+"."+a}return t},throwPointLeftZero:function(e){var t=String(e);if(t.indexOf(".")>-1){var n=t.split("."),a=n[0];return 0===(a=a.replace(/^[0]+/g,"")).length?"0."+n[1]:a+"."+n[1]}return""===(t=t.replace(/^[0]+/g,""))&&""!==e&&(t="0"),t}}}},582:function(e,t,n){},607:function(e,t,n){"use strict";n(582)},644:function(e,t,n){"use strict";n.r(t);n(239),n(118),n(82),n(11),n(83);var a,i=(null===(a=window._config)||void 0===a?void 0:a.amapStyleConfig)||{};delete i.region;var l={name:"DrawElementGis",props:{visible:{type:Object,default:function(){return{value:!1}}},zoom:{type:Number,default:function(){return 11}},title:{type:String,default:function(){return"选择位置"}},drawType:{type:String,default:function(){return"polygon"}},elementdata:{type:[Array],default:function(){return[]}}},model:{prop:"elementdata",event:"change"},data:function(){return{amapStyleConfig:i,center:[106.680603,29.402348],events:{},drawTypeClone:""}},computed:{elementType:function(){return"el-amap-"+this.drawType},elementInfo:function(){switch(this.drawType){case"marker":return{position:this.elementdata};case"polygon":case"polyline":return Array.isArray(this.elementdata)?{path:this.elementdata}:void console.warn("数据格式错误："+this.elementdata);case"circle":case"ellipse":case"rectangle":return this.elementdata;default:throw"不支持的图形:"+this.drawType}}},mounted:function(){},methods:{selectPointConfirm:function(){var e=this;this.elementdata.length<1?this.$alert("您还没有选择任何要素","",{confirmButtonText:"确定",showCancelButton:!0,callback:function(t){"confirm"===t&&(e.visible.value=!1)}}):this.visible.value=!1},clearDrawElement:function(){this.$emit("change",[]),this.initDrawTool()},handleClose:function(){this.$emit("change",[])},mapCreated:function(e){var t=this;console.log("----mapCreated---"),e.plugin(["AMap.MouseTool"],(function(){t.mouseTool=new AMap.MouseTool(e),t.initDrawTool()}))},initDrawTool:function(){var e=this;this.mouseTool[this.drawType]();AMap.event.addListener(this.mouseTool,"draw",(function(t){var n;switch(e.drawType){case"marker":n=[(n=t.obj.getPosition()).getLng(),n.getLat()];break;case"polygon":case"polyline":var a=t.obj.getPath();n=[],a.forEach((function(e){n.push([e.lng,e.lat])})),e.mouseTool.close(!0);break;case"circle":case"ellipse":case"rectangle":break;default:throw"不支持的图形:"+e.drawType}e.$emit("change",n)}))}}},o=(n(607),n(36)),s=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"select-point-container",attrs:{title:e.title,visible:e.visible.value,width:"45vw","show-close":!0,"close-on-click-modal":!1,"close-on-click-escape":!1,"append-to-body":!0},on:{"update:visible":function(t){return e.$set(e.visible,"value",t)}}},[n("el-amap",e._b({staticClass:"amap-box",attrs:{vid:"amap-vue",events:e.events},on:{created:e.mapCreated}},"el-amap",e.amapStyleConfig,!1),[n(e.elementType,e._b({tag:"component",attrs:{editable:!0}},"component",e.elementInfo,!1))],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.clearDrawElement}},[e._v("清 除")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.selectPointConfirm}},[e._v("确 定")])],1)],1)}),[],!1,null,"7890f5c0",null);t.default=s.exports},818:function(e,t,n){"use strict";n.r(t);var a=n(48),i=(n(239),n(119),n(413)),l={components:{DrawElementGis:n(644).default},name:"FormDrawElement",mixins:[i.a],props:{zoom:{type:Number,default:function(){return 11}},title:{type:String,default:function(){return"选择位置"}}},computed:{val:{get:function(){var e;try{e=JSON.parse(this.value)}catch(t){e=[]}return e},set:function(e){this.$emit("input",JSON.stringify(e)),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent(Object(a.a)({},this.item.key,e)):this.childChangeData.valueUpdateEvent()}}},data:function(){return{visible:{value:!1}}},created:function(){},methods:{selectPoint:function(){this.visible.value=!0}}},o=n(36),s=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"form-input-box form-item-box",class:"form-unqiue-"+e.item.key+" "+(e.getTextModel?"hz-text-box":"hz-untext-box"),style:e.item.style||{}},[n("div",{staticClass:"flex"},[e.getTextModel?n("div",{staticClass:"form-input-text",style:e.item.textStyle||{}},[e._v(e._s(e.value.slice(0,20)+"..."||!1)+"   ")]):n("el-input",e._b({attrs:{value:e.value,placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"text",readonly:""},on:{blur:function(t){return e.onBlur(e.item,t)}}},"el-input",e.bindOptions,!1)),e._v(" "),n("el-button",{staticClass:"ml10",attrs:{size:"small",disabled:e.getDisabled},on:{click:e.selectPoint}},[e._v(e._s(e.getTextModel?"查看":"选择"))])],1),e._v(" "),n("DrawElementGis",{attrs:{visible:e.visible,zoom:e.zoom,title:e.title,drawType:e.bindOptions.drawType},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})],1)}),[],!1,null,"576ece22",null);t.default=s.exports}}]);