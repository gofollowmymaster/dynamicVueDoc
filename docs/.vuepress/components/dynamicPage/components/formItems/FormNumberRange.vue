<template>
    <!-- 数字输入框 -->
    <div :style="item.style||{}"
         class="form-item-box">
        <section v-if="!getTextModel" class="flex justify-between">
            <el-input :value="val[0]"
                      :disabled="getDisabled"
                      type="number"
                      @input="startChange"
                      v-bind="bindOptions">
                                  <template slot="prepend" v-if="item.prepend">{{ item.prepend }}</template>
            <template slot="append" v-if="item.append">{{ item.append }}</template>
            </el-input>
             <span class="mx12">-</span>
             <el-input :value="val[1]"
                      :disabled="getDisabled"
                      type="number"
                      @input="endChange"
                      v-bind="bindOptions">
                                  <template slot="prepend" v-if="item.prepend">{{ item.prepend }}</template>
            <template slot="append" v-if="item.append">{{ item.append }}</template>
            </el-input>
            <!-- <span class="ml8 mr16">{{item.append}}</span> -->
           
        </section>
        <div v-else :style="item.textStyle||{}" class="form-input-text">
            {{ item.prepend }}
            {{ textModelValue  }}
            {{ item.append }}
        </div>
    </div>
</template>

<script>
    
    import FormMixin from './mixin';
    import { isEmpty} from '../../utils/tool'

    export default {
        name: 'FormNumberRange',
        mixins: [ FormMixin ],
        data () {
            return {
                readonly: true,
                // 在编辑模式下，使用这个 tempVal 替代真实的 val
                // 在触发 blur 事件时，用这个更新原来的 val

            };
        },
        computed: {
            valueObj(){
                return  (Array.isArray(this.value)&&this.value.length>1)?this.value:[null,null]
            },
            textModelValue(){
                return this.valueObj.join(' - ')
            },
            val: {
                get () {
                
                    return this.valueObj;
                },
                set (v) {
                    debugger
                    this._valueLink(v);

                    
                    this.$emit('input', v);

                    // 只有非子表单的情况下，才会冒泡上去数据变更
                    if (this.formItemType !== 'childForm') {
                        this.statusChangeFn.valueUpdateEvent({
                            [this.item.key]: v,
                        });
                    } else {
                        // 如果是子表单的话，执行内置的变更
                        this.childChangeData.valueUpdateEvent();
                    }
                }
            }
        },
        methods: {
            startChange(data){
                debugger
                    this.val=[data,this.val[1]]

            },
             endChange(data){
                debugger
                    this.val=[this.val[0],data]
            },
           
            
        },
    };
</script>

<style scoped lang="less">
/deep/ .el-input-group__append,/deep/ .el-input-group__prepend{
    padding:0 10px;
}

 
</style>
